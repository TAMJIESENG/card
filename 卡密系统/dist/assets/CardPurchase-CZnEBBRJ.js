import{_ as us,l as vs,r as w,P as ps,c as E,o as _s,a as _,d as v,f as e,A as Pe,b as k,e as a,w as o,h as V,t as i,u as b,F as R,g as A,a3 as gs,a1 as ms,n as J,Z as fs,i as f,L as bs,aq as Ue,G as Ce,ar as qe,as as ys,ab as hs,k as te,x as ws,aa as ks,q as Cs,I as xs,J as Is,at as Vs,V as Ss,a7 as Me,a5 as $s,R as D,a0 as zs}from"./index-ihp2IIuf.js";import{useVipStore as Ds}from"./vip-BiGGnL87.js";const Fs={class:"card-purchase"},Ts={class:"enterprise-navbar"},Ns={class:"nav-container"},Ps={class:"nav-search"},Us={class:"nav-actions"},qs={class:"user-badge"},Ms={class:"user-name"},Ls={class:"category-navigation"},js={class:"nav-container"},Es={class:"category-grid"},Os=["onClick"],Bs={class:"category-icon"},Rs={class:"icon-wrapper"},As={key:0},Js=["src","alt","onError"],Hs={class:"category-info"},Zs={class:"category-desc"},Ks={class:"category-meta"},Qs={class:"product-count"},Gs={class:"category-arrow"},Ys={class:"enterprise-filters"},Ws={class:"filters-container"},Xs={class:"filters-left"},et={class:"filter-section"},st={class:"filter-section"},tt={class:"filters-right"},at={class:"results-summary"},lt={class:"summary-badge"},nt={class:"count"},ot={class:"products-showcase"},it={class:"showcase-container"},rt={class:"products-grid"},dt={class:"card-image-section"},ct={class:"image-container"},ut=["src","alt"],vt={class:"image-overlay"},pt={class:"overlay-content"},_t={class:"status-badges"},gt={key:0,class:"status-badge hot"},mt={key:1,class:"status-badge new"},ft={key:2,class:"status-badge sold-out"},bt={key:3,class:"status-badge limited"},yt={class:"card-content-section"},ht={class:"content-header"},wt={class:"product-title-area"},kt=["title"],Ct={class:"product-rating"},xt={class:"product-summary"},It={class:"product-specifications"},Vt={class:"spec-grid"},St={class:"spec-card"},$t={class:"spec-details"},zt={class:"spec-value"},Dt={class:"spec-card"},Ft={class:"spec-details"},Tt={class:"spec-value"},Nt={class:"spec-card"},Pt={class:"spec-details"},Ut={class:"pricing-section"},qt={class:"enterprise-pricing"},Mt={key:0,class:"vip-pricing"},Lt={class:"pricing-header"},jt={class:"pricing-main"},Et={class:"current-price"},Ot={class:"price-comparison"},Bt={class:"original-price"},Rt={class:"savings-badge"},At={key:1,class:"standard-pricing"},Jt={class:"pricing-main"},Ht={class:"current-price"},Zt={class:"upgrade-prompt"},Kt={class:"action-controls"},Qt={class:"quantity-selector"},Gt={class:"action-buttons"},Yt={key:0,class:"empty-state"},Wt={key:0,class:"pagination-container"},Xt={class:"cart-header"},ea={class:"cart-content"},sa={key:0,class:"cart-empty"},ta={key:1,class:"cart-items"},aa=["src","alt"],la={class:"cart-item-info"},na={class:"cart-item-name"},oa={class:"cart-item-controls"},ia={class:"cart-item-price"},ra={key:0,class:"cart-footer"},da={class:"cart-total"},ca={class:"total-amount"},ua={key:0,class:"product-detail-content"},va={class:"detail-header"},pa={class:"detail-images"},_a={class:"main-image"},ga=["src","alt"],ma={class:"image-thumbnails"},fa=["onClick"],ba=["src","alt"],ya={class:"detail-info"},ha={class:"product-title-section"},wa={class:"product-badges"},ka={class:"rating-section"},Ca={class:"review-count"},xa={class:"price-section-detail"},Ia={key:0,class:"vip-price-detail"},Va={class:"price-main"},Sa={class:"current-price"},$a={class:"original-price"},za={class:"vip-benefits"},Da={class:"savings"},Fa={key:1,class:"standard-price-detail"},Ta={class:"current-price"},Na={class:"upgrade-hint"},Pa={class:"stock-section"},Ua={class:"stock-info"},qa={class:"delivery-info"},Ma={class:"detail-tabs"},La={class:"product-details"},ja={class:"detail-section"},Ea={class:"detail-section"},Oa={class:"specs-table"},Ba={class:"spec-row"},Ra={class:"spec-value"},Aa={class:"spec-row"},Ja={class:"spec-value"},Ha={class:"detail-section"},Za={class:"advantages-list"},Ka={class:"advantage-item"},Qa={class:"advantage-item"},Ga={class:"advantage-item"},Ya={class:"product-reviews"},Wa={class:"reviews-summary"},Xa={class:"rating-overview"},el={class:"rating-score"},sl={class:"score"},tl={class:"reviews-list"},al={key:0,class:"no-reviews"},ll={class:"reviewer-info"},nl={class:"reviewer-details"},ol={class:"review-meta"},il={class:"review-time"},rl={class:"review-content"},dl={key:0,class:"review-images"},cl=["src","alt"],ul={class:"detail-footer-actions"},vl={class:"quantity-section"},pl={class:"action-buttons"},_l={key:0,class:"review-form"},gl={class:"review-product-info"},ml=["src","alt"],fl={class:"review-product-details"},bl={class:"product-price"},yl={class:"review-rating"},hl={class:"review-content"},wl={class:"reviewer-info"},kl={class:"reviewer-avatar"},Cl={class:"reviewer-name"},xl={key:0,class:"purchase-confirmation"},Il={class:"product-summary"},Vl=["src","alt"],Sl={class:"summary-info"},$l={key:0,class:"card-type-selection"},zl={class:"card-type-grid"},Dl=["onClick"],Fl={class:"card-type-header"},Tl={class:"card-type-name"},Nl={class:"card-type-desc"},Pl={class:"card-type-stock"},Ul={class:"stock-label"},ql={key:0,class:"no-stock-warning"},Ml={class:"quantity-selection"},Ll={class:"quantity-hint"},jl={key:1,class:"vip-summary-pricing"},El={class:"summary-original"},Ol={class:"summary-discount"},Bl={class:"summary-total vip-total"},Rl={key:2},Al={class:"summary-price"},Jl={class:"summary-quantity"},Hl={class:"summary-total"},Zl={class:"vip-promotion"},Kl={class:"payment-method-selection"},Ql={key:0,class:"insufficient-balance"},Gl={__name:"CardPurchase",setup(Yl){const C=vs(),ve=Ds(),ae=w(!1),le=w(""),ne=w(1),oe=w(""),pe=w("recommended"),H=w(1),Q=w(12),G=w(!1),F=w([]),ie=w(!1),p=w(null),Y=w(""),_e=w("details"),W=w(1),re=w(!1),z=w(null),T=ps({rating:5,content:"",images:[]}),X=w(!1),g=w(null),x=w(1),O=w("balance"),ge=w(!1),S=w(null),me=E(()=>{var t;return((t=g.value)==null?void 0:t.cardTypes)||[]}),Z=w({alipay:!1,wechat:!1,bankTransfer:!1,paypal:!1}),M=w([]),L=w([]);w([{id:1,username:"ä¼ä¸šç”¨æˆ·A***",rating:5,time:"2024-01-15",content:"éå¸¸ä¸“ä¸šçš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Œäº¤ä»˜åŠæ—¶ï¼ŒæœåŠ¡ä¼˜è´¨ï¼Œå¼ºçƒˆæ¨èç»™å…¶ä»–ä¼ä¸šç”¨æˆ·ã€‚",tags:["æœåŠ¡ä¸“ä¸š","äº¤ä»˜åŠæ—¶","è´¨é‡ä¼˜ç§€"]},{id:2,username:"å•†åŠ¡å®¢æˆ·B***",rating:5,time:"2024-01-10",content:"äº§å“è´¨é‡å¾ˆå¥½ï¼Œå®¢æœå“åº”è¿…é€Ÿï¼Œè§£å†³é—®é¢˜å¾ˆåŠæ—¶ï¼Œä¼šç»§ç»­åˆä½œã€‚",tags:["è´¨é‡å¯é ","å®¢æœä¼˜ç§€","å“åº”è¿…é€Ÿ"]},{id:3,username:"æŠ€æœ¯æ€»ç›‘C***",rating:4,time:"2024-01-08",content:"æ•´ä½“ä½¿ç”¨ä½“éªŒä¸é”™ï¼ŒæŠ€æœ¯æ”¯æŒå¾ˆåˆ°ä½ï¼Œæœ‰å°é—®é¢˜ä½†å¾ˆå¿«å°±è§£å†³äº†ã€‚",tags:["æŠ€æœ¯æ”¯æŒå¥½","ä½¿ç”¨æ–¹ä¾¿"]},{id:4,username:"é‡‡è´­ç»ç†D***",rating:5,time:"2024-01-05",content:"é‡‡è´­æµç¨‹ç®€å•ï¼Œä»·æ ¼é€æ˜ï¼ŒVIPæœåŠ¡å¾ˆè´´å¿ƒï¼Œä¸ºå…¬å¸èŠ‚çœäº†ä¸å°‘æˆæœ¬ã€‚",tags:["æµç¨‹ç®€å•","ä»·æ ¼é€æ˜","VIPæœåŠ¡"]}]);const de=E(()=>C.user),$=E(()=>de.value?ve.getUserVipInfo(de.value.level||"æ™®é€š"):ve.vipLevels.æ™®é€š),Le=E(()=>L.value.filter(t=>t.zoneId===ne.value)),ee=E(()=>{let t=Le.value;if(le.value){const s=le.value.toLowerCase();t=t.filter(n=>n.name.toLowerCase().includes(s)||n.description.toLowerCase().includes(s))}if(oe.value){const[s,n]=oe.value.split("-").map(c=>c==="+"?1/0:parseInt(c));t=t.filter(c=>c.price>=s&&(n===void 0||c.price<=n))}switch(pe.value){case"price-asc":t.sort((s,n)=>s.price-n.price);break;case"price-desc":t.sort((s,n)=>n.price-s.price);break;case"newest":t.sort((s,n)=>(n.isNew?1:0)-(s.isNew?1:0));break;case"sales":t.sort((s,n)=>(n.isHot?1:0)-(s.isHot?1:0));break;default:t.sort((s,n)=>s.isHot&&!n.isHot?-1:!s.isHot&&n.isHot?1:s.isNew&&!n.isNew?-1:!s.isNew&&n.isNew?1:n.rating-s.rating)}return t}),je=E(()=>{const t=(H.value-1)*Q.value,s=t+Q.value;return ee.value.slice(t,s)}),Ee=E(()=>F.value.reduce((t,s)=>t+s.price*s.quantity,0)),Oe=E(()=>{var t;if(!g.value||me.value.length>0&&!S.value||S.value&&se(S.value.id)<x.value)return!1;if(O.value==="balance"){const s=N(g.value.price,x.value).finalTotal;return(((t=C.user)==null?void 0:t.balance)||0)>=s}return!0}),N=(t,s=1)=>{var m;const n=t*s,c=((m=de.value)==null?void 0:m.level)||"æ™®é€š",r=ve.calculateDiscountPrice(t,c),u=r.finalPrice*s,I=r.savings*s;return{originalTotal:parseFloat(n.toFixed(2)),finalTotal:parseFloat(u.toFixed(2)),totalSavings:parseFloat(I.toFixed(2)),hasDiscount:r.discount>0,discount:r.discount,discountPercent:Math.round((1-(1-r.discount))*10)}},Be=t=>{ne.value=t,H.value=1},Re=t=>{console.warn(`ä¸“åŒº ${t.name} çš„è‡ªå®šä¹‰å›¾æ ‡åŠ è½½å¤±è´¥ï¼Œæ¢å¤ä¸ºemojiå›¾æ ‡`),t.customIcon="",t.icon||(t.icon="ğŸ¯")},Ae=t=>{Q.value=t,H.value=1},Je=t=>{H.value=t},xe=t=>{const s=F.value.find(n=>n.id===t.id);s?s.quantity+t.quantity<=t.stock?(s.quantity+=t.quantity,D.success("å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦")):D.warning("åº“å­˜ä¸è¶³"):(F.value.push({...t,quantity:t.quantity}),D.success("å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦")),t.quantity=1},He=t=>{},Ze=t=>{const s=F.value.findIndex(n=>n.id===t);s!==-1&&(F.value.splice(s,1),D.success("å•†å“å·²ä»è´­ç‰©è½¦ç§»é™¤"))},Ie=t=>{if(g.value=t,x.value=t.quantity||1,O.value="balance",S.value=null,X.value=!0,t.cardTypes&&t.cardTypes.length>0){const s=t.cardTypes.find(n=>se(n.id)>0);s&&(S.value=s)}},Ke=()=>{if(F.value.length===0){D.warning("è´­ç‰©è½¦æ˜¯ç©ºçš„");return}D.info("æ‰¹é‡è´­ä¹°åŠŸèƒ½å¼€å‘ä¸­...")},Qe=t=>{S.value=t,x.value>ce()&&(x.value=ce())},Ge=t=>{const s={"7å¤©":"info","1ä¸ªæœˆ":"success","3ä¸ªæœˆ":"warning","6ä¸ªæœˆ":"danger","1å¹´":"danger",æ°¸ä¹…:"success"};if(s[t])return s[t];const n=t.match(/^(\d+)(å¤©|å‘¨|ä¸ªæœˆ|å¹´)$/);if(n){const c=parseInt(n[1]),r=n[2];let u=0;switch(r){case"å¤©":u=c;break;case"å‘¨":u=c*7;break;case"ä¸ªæœˆ":u=c*30;break;case"å¹´":u=c*365;break}return u<=30?"info":u<=90?"success":u<=180?"warning":"danger"}return"info"},se=t=>{try{return JSON.parse(localStorage.getItem("all_cards")||"[]").filter(n=>{var c,r;return String(n.zoneId)===String((c=g.value)==null?void 0:c.zoneId)&&String(n.productId)===String((r=g.value)==null?void 0:r.id)&&String(n.cardTypeId)===String(t)&&n.status==="unused"&&!n.purchasedBy}).length}catch{return 0}},ce=()=>g.value?S.value?Math.min(se(S.value.id),99):Math.min(g.value.stock||0,99):1,Ye=async()=>{var t,s;if(g.value){ge.value=!0;try{console.log("ğŸ›’ å¼€å§‹è´­ä¹°æµç¨‹:",g.value.name,x.value,"å¼ ");const n=JSON.parse(localStorage.getItem("all_cards")||"[]");let c;if(S.value?(c=n.filter(y=>y.status==="unused"&&!y.purchasedBy&&y.zoneId===g.value.zoneId&&y.productId===g.value.id&&y.cardTypeId===S.value.id),console.log("ğŸ¯ æŒ‰ç±»å‹ç­›é€‰å¡å¯†:",S.value.name,c.length,"å¼ ")):c=n.filter(y=>y.status==="unused"&&!y.purchasedBy&&y.zoneId===g.value.zoneId&&y.productId===g.value.id),console.log("ğŸ“¦ æ‰¾åˆ°å¯ç”¨å¡å¯†:",c.length,"å¼ "),c.length<x.value){D.error(`åº“å­˜ä¸è¶³ï¼å½“å‰åªæœ‰ ${c.length} å¼ å¯ç”¨å¡å¯†`);return}await new Promise(y=>setTimeout(y,1500));const r=N(g.value.price,x.value),u=r.finalTotal,I=We(),m=new Date().toLocaleString("zh-CN"),P=c.slice(0,x.value);console.log("ğŸ’³ å–å‡ºå¡å¯†:",P.map(y=>y.cardNumber));const U=[];P.forEach(y=>{const q=n.findIndex(he=>he.id===y.id);q!==-1&&(n[q].status="sold",n[q].purchasedBy=C.user.id,n[q].purchaser=C.user.username,n[q].purchaseTime=m,U.push(q))}),localStorage.setItem("all_cards",JSON.stringify(n)),console.log("âœ… å·²æ›´æ–°",U.length,"å¼ å¡å¯†çŠ¶æ€ä¸ºå·²è´­ä¹°");const K={id:Date.now(),orderNumber:I,userId:C.user.id,username:C.user.username,productId:g.value.id,productName:g.value.name,zoneId:g.value.zoneId,zoneName:((t=M.value.find(y=>y.id===g.value.zoneId))==null?void 0:t.name)||"",quantity:x.value,unitPrice:g.value.price,originalAmount:r.originalTotal,totalAmount:u,discount:r.discount,savings:r.totalSavings,userLevel:((s=de.value)==null?void 0:s.level)||"æ™®é€š",paymentMethod:O.value,status:"completed",createTime:m,completeTime:m,cardKeys:P.map(y=>y.cardNumber),cardIds:P.map(y=>y.id)},B=JSON.parse(localStorage.getItem("all_orders")||"[]");if(B.unshift(K),localStorage.setItem("all_orders",JSON.stringify(B)),O.value==="balance"){const y=(C.user.balance||0)-u;await C.updateUserBalance(C.user.id,y,`è´­ä¹°å•†å“ï¼š${g.value.name}`),await C.refreshCurrentUser()}ze();const ye=r.hasDiscount?`è´­ä¹°æˆåŠŸï¼${$.value.name}ä¼˜æƒ çœäº†Â¥${r.totalSavings.toFixed(2)}ï¼Œå®ä»˜Â¥${u.toFixed(2)}`:`è´­ä¹°æˆåŠŸï¼å®ä»˜Â¥${u.toFixed(2)}`;D.success(ye),X.value=!1,Xe(K.cardKeys),console.log("ğŸ‰ è´­ä¹°æµç¨‹å®Œæˆ")}catch(n){console.error("è´­ä¹°å¤±è´¥:",n),D.error("è´­ä¹°å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{ge.value=!1}}},We=()=>{const t=new Date,s=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),r=Date.now().toString().slice(-6);return`CD${s}${n}${c}${r}`},Xe=t=>{zs.alert(`<div style="max-height: 300px; overflow-y: auto;">
      <p style="margin-bottom: 16px;"><strong>æ‚¨çš„å¡å¯†ä¿¡æ¯ï¼š</strong></p>
      ${t.map(s=>`<div style="margin: 8px 0; padding: 8px; background: #f5f7fa; border-radius: 4px; font-family: monospace;">${s}</div>`).join("")}
      <p style="margin-top: 16px; color: #E6A23C;"><strong>è¯·å¦¥å–„ä¿ç®¡å¡å¯†ï¼Œç³»ç»Ÿä¸ä¼šå†æ¬¡æ˜¾ç¤ºï¼</strong></p>
    </div>`,"å¡å¯†ä¿¡æ¯",{confirmButtonText:"æˆ‘å·²ä¿å­˜",dangerouslyUseHTMLString:!0})},Ve=t=>{t.target.src="/default-product.jpg"},Se=t=>{p.value=t,Y.value=t.image||"/default-product.jpg",W.value=1,_e.value="details",ie.value=!0},fe=()=>{ie.value=!1,p.value=null,Y.value=""},$e=t=>{z.value=t,T.rating=5,T.content="",T.images=[],re.value=!0},be=()=>{re.value=!1,z.value=null},es=async()=>{if(!T.content.trim()){D.warning("è¯·å¡«å†™è¯„ä»·å†…å®¹");return}try{const t={id:Date.now(),productId:z.value.id,userId:C.user.id,userName:C.user.name,avatar:C.user.avatar||"/default-avatar.jpg",rating:T.rating,content:T.content,images:T.images,date:new Date().toISOString(),likes:0,isHelpful:!1};z.value.reviews||(z.value.reviews=[]),z.value.reviews.unshift(t),ss(z.value),ts(),D.success("è¯„ä»·æäº¤æˆåŠŸ"),be()}catch{D.error("æäº¤è¯„ä»·å¤±è´¥")}},ss=t=>{if(!t.reviews||t.reviews.length===0)return;const s=t.reviews.reduce((n,c)=>n+c.rating,0);t.rating=parseFloat((s/t.reviews.length).toFixed(1)),t.reviewCount=t.reviews.length},ts=()=>{try{console.log("=== ä¿å­˜è¯„è®ºæ•°æ® ===");const t={};L.value.forEach(s=>{s.reviews&&s.reviews.length>0&&(t[s.id]={reviews:s.reviews,rating:s.rating,reviewCount:s.reviewCount})}),localStorage.setItem("product_reviews",JSON.stringify(t)),console.log("è¯„è®ºæ•°æ®ä¿å­˜æˆåŠŸï¼Œå…±",Object.keys(t).length,"ä¸ªäº§å“æœ‰è¯„è®º"),Object.entries(t).forEach(([s,n])=>{console.log(`äº§å“ ${s}: ${n.reviewCount} æ¡è¯„è®ºï¼Œè¯„åˆ† ${n.rating}`)})}catch(t){console.error("ä¿å­˜è¯„è®ºæ•°æ®å¤±è´¥:",t),D.error("ä¿å­˜è¯„è®ºå¤±è´¥")}},as=()=>{try{console.log("=== åŠ è½½è¯„è®ºæ•°æ® ===");const t=localStorage.getItem("product_reviews");if(!t){console.log("æœªæ‰¾åˆ°å·²ä¿å­˜çš„è¯„è®ºæ•°æ®");return}const s=JSON.parse(t);console.log("åŠ è½½åˆ°",Object.keys(s).length,"ä¸ªäº§å“çš„è¯„è®ºæ•°æ®"),L.value.forEach(n=>{if(s[n.id]){const c=s[n.id];n.reviews=c.reviews,n.rating=c.rating,n.reviewCount=c.reviewCount,console.log(`æ¢å¤äº§å“ ${n.id} (â€œ${n.name}â€) çš„è¯„è®º:`,n.reviewCount,"æ¡")}}),console.log("è¯„è®ºæ•°æ®åŠ è½½å®Œæˆ")}catch(t){console.error("åŠ è½½è¯„è®ºæ•°æ®å¤±è´¥:",t)}},ls=t=>{const s=new Date(t),c=new Date-s,r=Math.floor(c/(1e3*60*60*24));if(r===0){const u=Math.floor(c/36e5);if(u===0){const I=Math.floor(c/6e4);return I<=0?"åˆšåˆš":`${I}åˆ†é’Ÿå‰`}return`${u}å°æ—¶å‰`}else return r<7?`${r}å¤©å‰`:s.toLocaleDateString("zh-CN")},ns=t=>{const s=[t.image||"/default-product.jpg"];return t.gallery&&t.gallery.length>0?[...s,...t.gallery]:s.concat(["/default-product.jpg","/default-product.jpg"].slice(1))},os=()=>{p.value&&(p.value.quantity=W.value,xe(p.value))},is=()=>{p.value&&(p.value.quantity=W.value,fe(),Ie(p.value))},rs=()=>{var t,s,n,c,r,u;try{const I=localStorage.getItem("payment_settings");if(I){const m=JSON.parse(I);Z.value.alipay=((t=m.alipay)==null?void 0:t.enabled)||!1,Z.value.wechat=((s=m.wechat)==null?void 0:s.enabled)||!1,Z.value.bankTransfer=((c=(n=m.other)==null?void 0:n.bankTransfer)==null?void 0:c.enabled)||!1,Z.value.paypal=((u=(r=m.other)==null?void 0:r.paypal)==null?void 0:u.enabled)||!1}}catch(I){console.error("åŠ è½½æ”¯ä»˜è®¾ç½®å¤±è´¥:",I)}},ze=()=>{try{const t=localStorage.getItem("card_zones");if(t){const r=JSON.parse(t);M.value=r.filter(u=>u.isActive),console.log("ğŸ“± è´­ä¹°é¡µé¢åŠ è½½ä¸“åŒºæ•°æ®:",M.value.length,"ä¸ªæ´»è·ƒä¸“åŒº"),M.value.forEach((u,I)=>{console.log(`ä¸“åŒº ${I+1}:`,{id:u.id,name:u.name,icon:u.icon||"æ— ",hasCustomIcon:!!u.customIcon,customIconLength:u.customIcon?u.customIcon.length:0})})}else M.value=[{id:1,name:"é»˜è®¤ä¸“åŒº",icon:"ğŸ¯",description:"é»˜è®¤å•†å“ä¸“åŒº",productCount:0,isActive:!0}];const s=localStorage.getItem("card_products"),n=JSON.parse(localStorage.getItem("all_cards")||"[]");console.log("ğŸ“¦ å¼€å§‹ç»Ÿè®¡å¡å¯†åº“å­˜ï¼Œæ€»å¡å¯†æ•°é‡:",n.length);const c={};n.forEach(r=>{if(r.status==="unused"&&!r.purchasedBy&&r.zoneId&&r.productId){const u=`${r.zoneId}-${r.productId}`;c[u]||(c[u]=0),c[u]++}}),console.log("ğŸ“Š åº“å­˜ç»Ÿè®¡ç»“æœ:",c),s?(L.value=JSON.parse(s).filter(r=>r.isActive).map(r=>{const u=`${r.zoneId}-${r.id}`,I=c[u]||0;return console.log(`å•†å“ ${r.name} (${u}): å®é™…åº“å­˜ ${I}`),{...r,stock:I,quantity:1,rating:r.rating||4.5}}),console.log("âœ… å•†å“åº“å­˜ç»Ÿè®¡å®Œæˆï¼Œå…±",L.value.length,"ä¸ªå•†å“"),L.value.forEach(r=>{console.log(`- ${r.name}: ${r.stock} å¼ å¯ç”¨å¡å¯†`)})):L.value=[],M.value.length>0&&(ne.value=M.value[0].id),console.log("ğŸ’³ è´­ä¹°é¡µé¢æ•°æ®åŠ è½½å®Œæˆï¼Œä¸“åŒºæ•°é‡:",M.value.length),setTimeout(()=>{as()},100),console.log("ğŸ“¦ å·²åŠ è½½å•†å“æ•°æ®:",L.value)}catch(t){console.error("åŠ è½½æ•°æ®å¤±è´¥:",t)}};return _s(()=>{rs(),ae.value=!0,ze(),setTimeout(()=>{ae.value=!1},1e3)}),(t,s)=>{var Fe,Te,Ne;const n=V("el-icon"),c=V("el-input"),r=V("el-avatar"),u=V("el-option"),I=V("el-select"),m=V("el-button"),P=V("el-rate"),U=V("el-tag"),K=V("router-link"),B=V("el-input-number"),ye=V("el-pagination"),y=V("el-badge"),q=V("el-tab-pane"),he=V("el-tabs"),we=V("el-dialog"),De=V("el-alert"),ke=V("el-radio"),ds=V("el-radio-group"),cs=ms("loading");return v(),_("div",Fs,[e("div",Ts,[e("div",Ns,[s[21]||(s[21]=Pe('<div class="nav-brand" data-v-9bb4ac13><div class="brand-icon" data-v-9bb4ac13><svg viewBox="0 0 24 24" fill="none" data-v-9bb4ac13><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" data-v-9bb4ac13></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round" data-v-9bb4ac13></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round" data-v-9bb4ac13></path></svg></div><span class="brand-text" data-v-9bb4ac13>CardKey<span class="pro-suffix" data-v-9bb4ac13>Enterprise</span></span></div>',1)),e("div",Ps,[a(c,{modelValue:le.value,"onUpdate:modelValue":s[0]||(s[0]=l=>le.value=l),placeholder:"æœç´¢ä¼ä¸šçº§æ•°å­—å•†å“...",clearable:"",class:"enterprise-search",size:"large"},{prefix:o(()=>[a(n,null,{default:o(()=>[a(b(fs))]),_:1})]),_:1},8,["modelValue"])]),e("div",Us,[e("div",qs,[a(r,{size:32,class:"user-avatar"},{default:o(()=>{var l,d,h;return[f(i(((h=(d=(l=b(C).user)==null?void 0:l.username)==null?void 0:d.charAt(0))==null?void 0:h.toUpperCase())||"U"),1)]}),_:1}),e("span",Ms,i(((Fe=b(C).user)==null?void 0:Fe.username)||"Guest"),1)])])])]),s[89]||(s[89]=Pe('<div class="page-hero" data-v-9bb4ac13><div class="hero-background" data-v-9bb4ac13><div class="hero-pattern" data-v-9bb4ac13></div><div class="hero-gradient" data-v-9bb4ac13></div></div><div class="hero-content" data-v-9bb4ac13><div class="hero-text" data-v-9bb4ac13><div class="hero-badge" data-v-9bb4ac13><span class="badge-icon" data-v-9bb4ac13>ğŸ¢</span><span data-v-9bb4ac13>Enterprise Digital Commerce</span></div><h1 class="hero-title" data-v-9bb4ac13> ä¸“ä¸šçº§æ•°å­—å¡å¯† <span class="title-gradient" data-v-9bb4ac13>äº¤æ˜“å¹³å°</span></h1><p class="hero-subtitle" data-v-9bb4ac13> ä¸ºä¼ä¸šå®¢æˆ·æä¾›å®‰å…¨ã€é«˜æ•ˆã€ä¸“ä¸šçš„æ•°å­—å•†å“äº¤æ˜“æœåŠ¡ <br data-v-9bb4ac13>æ”¯æŒæ‰¹é‡é‡‡è´­ã€ä¼ä¸šçº§å®‰å…¨è®¤è¯ã€å®æ—¶APIå¯¹æ¥ </p><div class="hero-stats" data-v-9bb4ac13><div class="stat-item" data-v-9bb4ac13><div class="stat-number" data-v-9bb4ac13>500+</div><div class="stat-label" data-v-9bb4ac13>ä¼ä¸šå®¢æˆ·</div></div><div class="stat-item" data-v-9bb4ac13><div class="stat-number" data-v-9bb4ac13>1M+</div><div class="stat-label" data-v-9bb4ac13>æˆåŠŸäº¤æ˜“</div></div><div class="stat-item" data-v-9bb4ac13><div class="stat-number" data-v-9bb4ac13>99.99%</div><div class="stat-label" data-v-9bb4ac13>ç³»ç»Ÿå¯ç”¨æ€§</div></div></div></div></div></div>',1)),e("div",Ls,[e("div",js,[s[23]||(s[23]=e("div",{class:"category-header"},[e("h2",null,"äº§å“åˆ†ç±»"),e("p",null,"é€‰æ‹©æ‚¨çš„ä¸šåŠ¡éœ€æ±‚åˆ†ç±»")],-1)),e("div",Es,[(v(!0),_(R,null,A(M.value,l=>(v(),_("div",{key:l.id,class:J(["category-card",{active:ne.value===l.id}]),onClick:d=>Be(l.id)},[e("div",Bs,[e("div",Rs,[!l.customIcon||l.customIcon.trim()===""?(v(),_("span",As,i(l.icon||"ğŸ¯"),1)):(v(),_("img",{key:1,src:l.customIcon,alt:l.name,class:"custom-zone-icon",onError:d=>Re(l)},null,40,Js))])]),e("div",Hs,[e("h3",null,i(l.name),1),e("p",Zs,i(l.description||"ä¸“ä¸šæ•°å­—å•†å“è§£å†³æ–¹æ¡ˆ"),1),e("div",Ks,[e("span",Qs,i(l.productCount)+" æ¬¾äº§å“",1),s[22]||(s[22]=e("span",{class:"availability"},"ç°è´§å……è¶³",-1))])]),e("div",Gs,[a(n,null,{default:o(()=>[a(b(bs))]),_:1})])],10,Os))),128))])])]),e("div",Ys,[e("div",Ws,[e("div",Xs,[e("div",et,[s[24]||(s[24]=e("h3",null,"ä»·æ ¼èŒƒå›´",-1)),a(I,{modelValue:oe.value,"onUpdate:modelValue":s[1]||(s[1]=l=>oe.value=l),placeholder:"é€‰æ‹©ä»·æ ¼èŒƒå›´",clearable:"",size:"large"},{default:o(()=>[a(u,{label:"å…¨éƒ¨ä»·æ ¼",value:""}),a(u,{label:"Â¥0-50",value:"0-50"}),a(u,{label:"Â¥50-100",value:"50-100"}),a(u,{label:"Â¥100-500",value:"100-500"}),a(u,{label:"Â¥500+",value:"500+"})]),_:1},8,["modelValue"])]),e("div",st,[s[25]||(s[25]=e("h3",null,"æ’åºæ–¹å¼",-1)),a(I,{modelValue:pe.value,"onUpdate:modelValue":s[2]||(s[2]=l=>pe.value=l),placeholder:"é€‰æ‹©æ’åº",size:"large"},{default:o(()=>[a(u,{label:"æ™ºèƒ½æ¨è",value:"recommended"}),a(u,{label:"ä»·æ ¼ä¼˜å…ˆ",value:"price-asc"}),a(u,{label:"é«˜ç«¯ä¼˜å…ˆ",value:"price-desc"}),a(u,{label:"æœ€æ–°ä¸Šæ¶",value:"newest"}),a(u,{label:"çƒ­é”€ç²¾é€‰",value:"sales"})]),_:1},8,["modelValue"])])]),e("div",tt,[e("div",at,[e("div",lt,[e("span",nt,i(ee.value.length),1),s[26]||(s[26]=e("span",{class:"label"},"æ¬¾ä¼ä¸šçº§äº§å“",-1))]),s[27]||(s[27]=e("div",{class:"quality-badge"},[e("span",{class:"icon"},"âœ“"),e("span",null,"å…¨éƒ¨ç°è´§")],-1))])])])]),e("div",ot,[e("div",it,[gs((v(),_("div",rt,[(v(!0),_(R,null,A(je.value,l=>(v(),_("div",{key:l.id,class:J(["enterprise-product-card",{"out-of-stock":l.stock===0}])},[e("div",dt,[e("div",ct,[e("img",{src:l.image||"/default-product.jpg",alt:l.name,onError:Ve},null,40,ut),e("div",vt,[e("div",pt,[a(m,{type:"primary",size:"large",circle:"",onClick:d=>Se(l)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ue))]),_:1})]),_:2},1032,["onClick"]),s[28]||(s[28]=e("span",{class:"overlay-text"},"æŸ¥çœ‹è¯¦æƒ…",-1))])])]),e("div",_t,[l.isHot?(v(),_("div",gt,s[29]||(s[29]=[e("span",{class:"badge-icon"},"ğŸ”¥",-1),e("span",{class:"badge-text"},"ä¼ä¸šçƒ­é”€",-1)]))):k("",!0),l.isNew?(v(),_("div",mt,s[30]||(s[30]=[e("span",{class:"badge-icon"},"âœ¨",-1),e("span",{class:"badge-text"},"æ–°å“ä¸Šå¸‚",-1)]))):k("",!0),l.stock===0?(v(),_("div",ft,s[31]||(s[31]=[e("span",{class:"badge-text"},"æš‚æ—¶å”®ç½„",-1)]))):k("",!0),l.stock>0&&l.stock<=10?(v(),_("div",bt,s[32]||(s[32]=[e("span",{class:"badge-text"},"ä¼˜å…ˆä¾›åº”",-1)]))):k("",!0)])]),e("div",yt,[e("div",ht,[e("div",wt,[e("h3",{class:"product-title",title:l.name},i(l.name),9,kt),s[33]||(s[33]=e("div",{class:"title-underline"},null,-1))]),e("div",Ct,[a(P,{modelValue:l.rating,"onUpdate:modelValue":d=>l.rating=d,disabled:"","show-score":"","text-color":"#f59e0b","score-template":"{value}",size:"small"},null,8,["modelValue","onUpdate:modelValue"])])]),e("p",xt,i(l.description),1),e("div",It,[e("div",Vt,[e("div",St,[s[35]||(s[35]=e("div",{class:"spec-icon"},"ğŸ’¼",-1)),e("div",$t,[s[34]||(s[34]=e("div",{class:"spec-label"},"äº§å“ç±»å‹",-1)),e("div",zt,i(l.type),1)])]),e("div",Dt,[s[37]||(s[37]=e("div",{class:"spec-icon"},"â°",-1)),e("div",Ft,[s[36]||(s[36]=e("div",{class:"spec-label"},"æœåŠ¡å‘¨æœŸ",-1)),e("div",Tt,i(l.validity),1)])]),e("div",Nt,[s[39]||(s[39]=e("div",{class:"spec-icon"},"ğŸ“¦",-1)),e("div",Pt,[s[38]||(s[38]=e("div",{class:"spec-label"},"åº“å­˜æƒ…å†µ",-1)),e("div",{class:J(["spec-value",{"limited-stock":l.stock<=10}])},i(l.stock)+" ä»¶ ",3)])])])]),e("div",Ut,[e("div",qt,[$.value.level>0?(v(),_("div",Mt,[e("div",Lt,[s[40]||(s[40]=e("span",{class:"pricing-label"},"VIPä¼ä¸šä»·",-1)),a(U,{size:"small",type:$.value.level===1?"warning":"",color:$.value.level===2?"#9333ea":"",class:"discount-tag"},{default:o(()=>[f(i($.value.name)+i((10-$.value.discount*10).toFixed(1))+"æŠ˜ ",1)]),_:1},8,["type","color"])]),e("div",jt,[e("div",Et,"Â¥"+i(N(l.price).finalTotal.toFixed(2)),1),e("div",Ot,[e("span",Bt,"åŸä»·: Â¥"+i(l.price.toFixed(2)),1),e("span",Rt,"çœÂ¥"+i(N(l.price).totalSavings.toFixed(2)),1)])])])):(v(),_("div",At,[e("div",Jt,[e("div",Ht,"Â¥"+i(l.price.toFixed(2)),1),e("div",Zt,[a(K,{to:"/vip",class:"upgrade-link"},{default:o(()=>s[41]||(s[41]=[e("span",{class:"icon"},"â­",-1),f(" å‡çº§VIPäº«ä¼˜æƒ  ",-1)])),_:1,__:[41]})])])]))]),e("div",Kt,[e("div",Qt,[s[42]||(s[42]=e("label",{class:"quantity-label"},"æ•°é‡ï¼š",-1)),a(B,{modelValue:l.quantity,"onUpdate:modelValue":d=>l.quantity=d,min:1,max:Math.min(l.stock||99,99),disabled:!l.stock||l.stock===0,size:"large",class:"quantity-input"},null,8,["modelValue","onUpdate:modelValue","max","disabled"])]),e("div",Gt,[a(m,{onClick:d=>Se(l),size:"large",class:"enterprise-btn detail-btn"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ue))]),_:1}),s[43]||(s[43]=f(" æŸ¥çœ‹è¯¦æƒ… ",-1))]),_:2,__:[43]},1032,["onClick"]),a(m,{type:"primary",onClick:d=>xe(l),disabled:l.stock===0,size:"large",class:"enterprise-btn cart-btn"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ce))]),_:1}),s[44]||(s[44]=f(" åŠ å…¥è´­ç‰©è½¦ ",-1))]),_:2,__:[44]},1032,["onClick","disabled"]),a(m,{type:"success",onClick:d=>Ie(l),disabled:l.stock===0,size:"large",class:"enterprise-btn buy-btn"},{default:o(()=>s[45]||(s[45]=[f(" ç«‹å³è´­ä¹° ",-1)])),_:2,__:[45]},1032,["onClick","disabled"]),a(m,{type:"warning",onClick:d=>$e(l),size:"large",class:"enterprise-btn review-btn"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(qe))]),_:1}),s[46]||(s[46]=f(" è¯„ä»·å•†å“ ",-1))]),_:2,__:[46]},1032,["onClick"])])])])])],2))),128)),ee.value.length===0&&!ae.value?(v(),_("div",Yt,s[47]||(s[47]=[e("div",{class:"empty-icon"},"ğŸ“¦",-1),e("h3",null,"æš‚æ— å•†å“",-1),e("p",null,"å½“å‰ä¸“åŒºæš‚æ—¶æ²¡æœ‰å•†å“ï¼Œè¯·åˆ‡æ¢åˆ°å…¶ä»–ä¸“åŒºæŸ¥çœ‹",-1)]))):k("",!0)])),[[cs,ae.value]])])]),ee.value.length>0?(v(),_("div",Wt,[a(ye,{"current-page":H.value,"onUpdate:currentPage":s[3]||(s[3]=l=>H.value=l),"page-size":Q.value,"onUpdate:pageSize":s[4]||(s[4]=l=>Q.value=l),"page-sizes":[12,24,48,96],total:ee.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ae,onCurrentChange:Je},null,8,["current-page","page-size","total"])])):k("",!0),e("div",{class:J(["cart-sidebar",{active:G.value}])},[e("div",Xt,[e("h3",null,"ğŸ›’ è´­ç‰©è½¦ ("+i(F.value.length)+")",1),a(m,{type:"text",onClick:s[5]||(s[5]=l=>G.value=!1),class:"close-cart-btn"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(ys))]),_:1})]),_:1})]),e("div",ea,[F.value.length===0?(v(),_("div",sa,s[48]||(s[48]=[e("div",{class:"empty-cart-icon"},"ğŸ›’",-1),e("p",null,"è´­ç‰©è½¦æ˜¯ç©ºçš„",-1)]))):(v(),_("div",ta,[(v(!0),_(R,null,A(F.value,l=>(v(),_("div",{key:l.id,class:"cart-item"},[e("img",{src:l.image||"/default-product.jpg",alt:l.name,class:"cart-item-image"},null,8,aa),e("div",la,[e("h4",na,i(l.name),1),e("div",oa,[a(B,{modelValue:l.quantity,"onUpdate:modelValue":d=>l.quantity=d,min:1,max:l.stock||99,size:"small",onChange:d=>He()},null,8,["modelValue","onUpdate:modelValue","max","onChange"]),e("span",ia,"Â¥"+i((l.price*l.quantity).toFixed(2)),1),a(m,{type:"text",size:"small",onClick:d=>Ze(l.id),class:"remove-item-btn"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(hs))]),_:1})]),_:2},1032,["onClick"])])])]))),128))]))]),F.value.length>0?(v(),_("div",ra,[e("div",da,[s[49]||(s[49]=e("span",{class:"total-label"},"æ€»è®¡ï¼š",-1)),e("span",ca,"Â¥"+i(Ee.value.toFixed(2)),1)]),a(m,{type:"primary",onClick:Ke,class:"checkout-btn",size:"large"},{default:o(()=>s[50]||(s[50]=[f(" ç«‹å³ç»“ç®— ",-1)])),_:1,__:[50]})])):k("",!0)],2),G.value?(v(),_("div",{key:1,class:"cart-overlay",onClick:s[6]||(s[6]=l=>G.value=!1)})):k("",!0),e("div",{class:"floating-cart",onClick:s[7]||(s[7]=l=>G.value=!0)},[a(y,{value:F.value.length,hidden:F.value.length===0},{default:o(()=>[a(m,{type:"primary",size:"large",circle:""},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ce))]),_:1})]),_:1})]),_:1},8,["value","hidden"])]),a(we,{modelValue:ie.value,"onUpdate:modelValue":s[13]||(s[13]=l=>ie.value=l),title:((Te=p.value)==null?void 0:Te.name)||"å•†å“è¯¦æƒ…",width:"90%","max-width":1200,class:"product-detail-dialog","before-close":fe},{footer:o(()=>{var l,d,h,j;return[e("div",ul,[e("div",vl,[s[72]||(s[72]=e("span",{class:"quantity-label"},"è´­ä¹°æ•°é‡:",-1)),a(B,{modelValue:W.value,"onUpdate:modelValue":s[12]||(s[12]=ue=>W.value=ue),min:1,max:Math.min(((l=p.value)==null?void 0:l.stock)||99,99),disabled:!((d=p.value)!=null&&d.stock),size:"large"},null,8,["modelValue","max","disabled"])]),e("div",pl,[a(m,{size:"large",onClick:fe},{default:o(()=>s[73]||(s[73]=[f(" å–æ¶ˆ ",-1)])),_:1,__:[73]}),a(m,{type:"primary",size:"large",onClick:os,disabled:!((h=p.value)!=null&&h.stock)},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ce))]),_:1}),s[74]||(s[74]=f(" åŠ å…¥è´­ç‰©è½¦ ",-1))]),_:1,__:[74]},8,["disabled"]),a(m,{type:"success",size:"large",onClick:is,disabled:!((j=p.value)!=null&&j.stock)},{default:o(()=>s[75]||(s[75]=[f(" ç«‹å³è´­ä¹° ",-1)])),_:1,__:[75]},8,["disabled"])])])]}),default:o(()=>[p.value?(v(),_("div",ua,[e("div",va,[e("div",pa,[e("div",_a,[e("img",{src:Y.value||p.value.image||"/default-product.jpg",alt:p.value.name,onError:Ve},null,40,ga)]),e("div",ma,[(v(!0),_(R,null,A(ns(p.value),(l,d)=>(v(),_("div",{key:d,class:J(["thumbnail",{active:Y.value===l}]),onClick:h=>Y.value=l},[e("img",{src:l,alt:`${p.value.name} å›¾ç‰‡ ${d+1}`},null,8,ba)],10,fa))),128))])]),e("div",ya,[e("div",ha,[e("h1",null,i(p.value.name),1),e("div",wa,[p.value.isHot?(v(),te(U,{key:0,type:"danger",size:"small"},{default:o(()=>s[51]||(s[51]=[f("ğŸ”¥ ä¼ä¸šçƒ­é”€",-1)])),_:1,__:[51]})):k("",!0),p.value.isNew?(v(),te(U,{key:1,type:"primary",size:"small"},{default:o(()=>s[52]||(s[52]=[f("âœ¨ æ–°å“ä¸Šå¸‚",-1)])),_:1,__:[52]})):k("",!0),p.value.stock<=10?(v(),te(U,{key:2,type:"warning",size:"small"},{default:o(()=>s[53]||(s[53]=[f("ğŸ“¦ ä¼˜å…ˆä¾›åº”",-1)])),_:1,__:[53]})):k("",!0)])]),e("div",ka,[a(P,{modelValue:p.value.rating,"onUpdate:modelValue":s[8]||(s[8]=l=>p.value.rating=l),disabled:"","show-score":"","text-color":"#f59e0b","score-template":"{value} åˆ†"},null,8,["modelValue"]),e("span",Ca,"("+i(p.value.reviewCount||128)+"æ¡è¯„ä»·)",1)]),e("div",xa,[$.value.level>0?(v(),_("div",Ia,[e("div",Va,[e("span",Sa,"Â¥"+i(N(p.value.price).finalTotal.toFixed(2)),1),e("span",$a,"åŸä»·: Â¥"+i(p.value.price.toFixed(2)),1)]),e("div",za,[a(U,{type:"success",size:"small"},{default:o(()=>[f(i($.value.name)+"ä¸“äº« "+i((10-$.value.discount*10).toFixed(1))+"æŠ˜ä¼˜æƒ  ",1)]),_:1}),e("span",Da,"ç«‹çœ Â¥"+i(N(p.value.price).totalSavings.toFixed(2)),1)])])):(v(),_("div",Fa,[e("span",Ta,"Â¥"+i(p.value.price.toFixed(2)),1),e("div",Na,[a(K,{to:"/vip",class:"vip-upgrade"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(ws))]),_:1}),s[54]||(s[54]=f(" å‡çº§VIPäº«å—ä¼ä¸šçº§ä¼˜æƒ  ",-1))]),_:1,__:[54]})])]))]),e("div",Pa,[e("div",Ua,[s[55]||(s[55]=e("span",{class:"stock-label"},"åº“å­˜çŠ¶æ€:",-1)),e("span",{class:J(["stock-value",{"low-stock":p.value.stock<=10}])},i(p.value.stock>0?`ç°è´§${p.value.stock}ä»¶`:"æš‚æ—¶ç¼ºè´§"),3)]),e("div",qa,[a(n,null,{default:o(()=>[a(b(ks))]),_:1}),s[56]||(s[56]=e("span",null,"ä¼ä¸šçº§æœåŠ¡ â€¢ å³æ—¶äº¤ä»˜ â€¢ 7Ã—24æŠ€æœ¯æ”¯æŒ",-1))])])])]),e("div",Ma,[a(he,{modelValue:_e.value,"onUpdate:modelValue":s[11]||(s[11]=l=>_e.value=l),class:"detail-tab-container"},{default:o(()=>[a(q,{label:"äº§å“è¯¦æƒ…",name:"details"},{default:o(()=>[e("div",La,[e("div",ja,[s[57]||(s[57]=e("h3",null,"äº§å“æè¿°",-1)),e("p",null,i(p.value.description||"ä¸“ä¸šçš„ä¼ä¸šçº§æ•°å­—å•†å“è§£å†³æ–¹æ¡ˆï¼Œä¸ºæ‚¨çš„ä¸šåŠ¡æä¾›å®‰å…¨ã€å¯é ã€é«˜æ•ˆçš„æœåŠ¡ä½“éªŒã€‚"),1)]),e("div",Ea,[s[63]||(s[63]=e("h3",null,"äº§å“è§„æ ¼",-1)),e("div",Oa,[e("div",Ba,[s[58]||(s[58]=e("span",{class:"spec-key"},"äº§å“ç±»å‹",-1)),e("span",Ra,i(p.value.type||"ä¼ä¸šçº§æ•°å­—å•†å“"),1)]),e("div",Aa,[s[59]||(s[59]=e("span",{class:"spec-key"},"æœåŠ¡å‘¨æœŸ",-1)),e("span",Ja,i(p.value.validity||"é•¿æœŸæœ‰æ•ˆ"),1)]),s[60]||(s[60]=e("div",{class:"spec-row"},[e("span",{class:"spec-key"},"äº¤ä»˜æ–¹å¼"),e("span",{class:"spec-value"},"å³æ—¶è‡ªåŠ¨äº¤ä»˜")],-1)),s[61]||(s[61]=e("div",{class:"spec-row"},[e("span",{class:"spec-key"},"æŠ€æœ¯æ”¯æŒ"),e("span",{class:"spec-value"},"7Ã—24å°æ—¶åœ¨çº¿æœåŠ¡")],-1)),s[62]||(s[62]=e("div",{class:"spec-row"},[e("span",{class:"spec-key"},"å®‰å…¨ä¿éšœ"),e("span",{class:"spec-value"},"ä¼ä¸šçº§å®‰å…¨è®¤è¯")],-1))])]),e("div",Ha,[s[67]||(s[67]=e("h3",null,"æœåŠ¡ä¼˜åŠ¿",-1)),e("div",Za,[e("div",Ka,[a(n,null,{default:o(()=>[a(b(Cs))]),_:1}),s[64]||(s[64]=e("div",null,[e("h4",null,"å®‰å…¨å¯é "),e("p",null,"é‡‡ç”¨é“¶è¡Œçº§å®‰å…¨æ ‡å‡†ï¼Œç¡®ä¿æ•°æ®å®‰å…¨å’Œäº¤æ˜“å¯é æ€§")],-1))]),e("div",Qa,[a(n,null,{default:o(()=>[a(b(xs))]),_:1}),s[65]||(s[65]=e("div",null,[e("h4",null,"å³æ—¶äº¤ä»˜"),e("p",null,"è‡ªåŠ¨åŒ–å¤„ç†ç³»ç»Ÿï¼Œæ”¯ä»˜æˆåŠŸåç«‹å³äº¤ä»˜äº§å“")],-1))]),e("div",Ga,[a(n,null,{default:o(()=>[a(b(Is))]),_:1}),s[66]||(s[66]=e("div",null,[e("h4",null,"ä¸“ä¸šæœåŠ¡"),e("p",null,"7Ã—24å°æ—¶æŠ€æœ¯æ”¯æŒï¼Œä¸“ä¸šå›¢é˜Ÿä¸ºæ‚¨æä¾›ä¼˜è´¨æœåŠ¡")],-1))])])])])]),_:1}),a(q,{label:"ç”¨æˆ·è¯„ä»·",name:"reviews"},{default:o(()=>{var l,d;return[e("div",Ya,[e("div",Wa,[e("div",Xa,[e("div",el,[e("span",sl,i(p.value.rating||4.8),1),a(P,{modelValue:p.value.rating,"onUpdate:modelValue":s[9]||(s[9]=h=>p.value.rating=h),disabled:"",size:"large"},null,8,["modelValue"])]),s[68]||(s[68]=e("div",{class:"rating-stats"},[e("div",{class:"stat-item"},[e("span",{class:"stars"},"5æ˜Ÿ"),e("div",{class:"progress-bar"},[e("div",{class:"progress",style:{width:"75%"}})]),e("span",{class:"count"},"96")]),e("div",{class:"stat-item"},[e("span",{class:"stars"},"4æ˜Ÿ"),e("div",{class:"progress-bar"},[e("div",{class:"progress",style:{width:"20%"}})]),e("span",{class:"count"},"26")]),e("div",{class:"stat-item"},[e("span",{class:"stars"},"3æ˜Ÿ"),e("div",{class:"progress-bar"},[e("div",{class:"progress",style:{width:"3%"}})]),e("span",{class:"count"},"4")]),e("div",{class:"stat-item"},[e("span",{class:"stars"},"2æ˜Ÿ"),e("div",{class:"progress-bar"},[e("div",{class:"progress",style:{width:"1%"}})]),e("span",{class:"count"},"1")]),e("div",{class:"stat-item"},[e("span",{class:"stars"},"1æ˜Ÿ"),e("div",{class:"progress-bar"},[e("div",{class:"progress",style:{width:"1%"}})]),e("span",{class:"count"},"1")])],-1))])]),e("div",tl,[!((l=p.value)!=null&&l.reviews)||p.value.reviews.length===0?(v(),_("div",al,[s[70]||(s[70]=e("p",null,"æš‚æ— è¯„ä»·ï¼Œæ¥å†™ç¬¬ä¸€æ¡è¯„ä»·å§ï¼",-1)),a(m,{type:"primary",onClick:s[10]||(s[10]=h=>$e(p.value))},{default:o(()=>[a(n,null,{default:o(()=>[a(b(qe))]),_:1}),s[69]||(s[69]=f(" å†™è¯„ä»· ",-1))]),_:1,__:[69]})])):k("",!0),(v(!0),_(R,null,A(((d=p.value)==null?void 0:d.reviews)||[],h=>(v(),_("div",{class:"review-item",key:h.id},[e("div",ll,[a(r,{size:40,src:h.avatar},{default:o(()=>{var j;return[f(i(((j=h.userName)==null?void 0:j.charAt(0))||"U"),1)]}),_:2},1032,["src"]),e("div",nl,[e("h4",null,i(h.userName||"åŒ¿åç”¨æˆ·"),1),e("div",ol,[a(P,{"model-value":h.rating,disabled:"",size:"small"},null,8,["model-value"]),e("span",il,i(ls(h.date)),1)])])]),e("div",rl,[e("p",null,i(h.content),1),h.images&&h.images.length>0?(v(),_("div",dl,[(v(!0),_(R,null,A(h.images,(j,ue)=>(v(),_("img",{key:ue,src:j,alt:`è¯„ä»·å›¾ç‰‡${ue+1}`},null,8,cl))),128))])):k("",!0)])]))),128))])])]}),_:1}),a(q,{label:"è´­ä¹°é¡»çŸ¥",name:"notice"},{default:o(()=>s[71]||(s[71]=[e("div",{class:"purchase-notice"},[e("div",{class:"notice-section"},[e("h3",null,"ğŸ”’ å®‰å…¨ä¿éšœ"),e("ul",null,[e("li",null,"æ‰€æœ‰äº¤æ˜“å‡é‡‡ç”¨SSLåŠ å¯†ä¼ è¾“ï¼Œç¡®ä¿æ”¯ä»˜å®‰å…¨"),e("li",null,"äº§å“å‡é€šè¿‡ä¼ä¸šçº§å®‰å…¨æ£€æµ‹ï¼Œå“è´¨æœ‰ä¿éšœ"),e("li",null,"æ”¯æŒ7å¤©æ— ç†ç”±é€€æ¢ï¼Œæ¶ˆè´¹è€…æƒç›Šå¾—åˆ°å……åˆ†ä¿æŠ¤")])]),e("div",{class:"notice-section"},[e("h3",null,"ğŸ“¦ äº¤ä»˜è¯´æ˜"),e("ul",null,[e("li",null,"æ”¯ä»˜æˆåŠŸåç³»ç»Ÿå°†è‡ªåŠ¨å‘é€äº§å“ä¿¡æ¯åˆ°æ‚¨çš„é‚®ç®±"),e("li",null,"å¡å¯†ä¿¡æ¯ä¹Ÿä¼šåœ¨ç”¨æˆ·ä¸­å¿ƒçš„è®¢å•è¯¦æƒ…ä¸­æ˜¾ç¤º"),e("li",null,"è¯·å¦¥å–„ä¿ç®¡å¡å¯†ä¿¡æ¯ï¼Œé¿å…æ³„éœ²ç»™ä»–äºº")])]),e("div",{class:"notice-section"},[e("h3",null,"ğŸ’ å”®åæœåŠ¡"),e("ul",null,[e("li",null,"7Ã—24å°æ—¶åœ¨çº¿å®¢æœæ”¯æŒï¼Œéšæ—¶ä¸ºæ‚¨è§£ç­”ç–‘é—®"),e("li",null,"ä¸“ä¸šæŠ€æœ¯å›¢é˜Ÿæä¾›ä½¿ç”¨æŒ‡å¯¼å’ŒæŠ€æœ¯æ”¯æŒ"),e("li",null,"ä¼ä¸šå®¢æˆ·äº«å—ä¸“å±å®¢æˆ·ç»ç†ä¸€å¯¹ä¸€æœåŠ¡")])])],-1)])),_:1,__:[71]})]),_:1},8,["modelValue"])])])):k("",!0)]),_:1},8,["modelValue","title"]),a(we,{modelValue:re.value,"onUpdate:modelValue":s[16]||(s[16]=l=>re.value=l),title:`è¯„ä»·å•†å“ - ${((Ne=z.value)==null?void 0:Ne.name)||""}`,width:"600px",class:"review-dialog",onClose:be},{footer:o(()=>[a(m,{onClick:be,size:"large"},{default:o(()=>s[78]||(s[78]=[f(" å–æ¶ˆ ",-1)])),_:1,__:[78]}),a(m,{type:"primary",onClick:es,size:"large",disabled:!T.content.trim()},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Ss))]),_:1}),s[79]||(s[79]=f(" æäº¤è¯„ä»· ",-1))]),_:1,__:[79]},8,["disabled"])]),default:o(()=>{var l;return[z.value?(v(),_("div",_l,[e("div",gl,[e("img",{src:z.value.image||"/default-product.jpg",alt:z.value.name,class:"review-product-image"},null,8,ml),e("div",fl,[e("h3",null,i(z.value.name),1),e("p",bl,"Â¥"+i(z.value.price),1)])]),e("div",yl,[s[76]||(s[76]=e("label",null,"è¯„åˆ†ï¼š",-1)),a(P,{modelValue:T.rating,"onUpdate:modelValue":s[14]||(s[14]=d=>T.rating=d),max:5,"show-text":"",texts:["æå·®","è¾ƒå·®","ä¸€èˆ¬","æ¨è","åŠ›è"],size:"large",style:{"--el-rate-icon-size":"20px"}},null,8,["modelValue"])]),e("div",hl,[s[77]||(s[77]=e("label",null,"è¯„ä»·å†…å®¹ï¼š",-1)),a(c,{modelValue:T.content,"onUpdate:modelValue":s[15]||(s[15]=d=>T.content=d),type:"textarea",rows:4,placeholder:"è¯·è¯¦ç»†æè¿°æ‚¨å¯¹è¿™æ¬¾äº§å“çš„ä½¿ç”¨ä½“éªŒ...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),e("div",wl,[e("div",kl,[a(n,null,{default:o(()=>[a(b(Vs))]),_:1})]),e("span",Cl,i(((l=b(C).user)==null?void 0:l.name)||"åŒ¿åç”¨æˆ·"),1)])])):k("",!0)]}),_:1},8,["modelValue","title"]),a(we,{modelValue:X.value,"onUpdate:modelValue":s[20]||(s[20]=l=>X.value=l),title:"ç¡®è®¤è´­ä¹°",width:"500px"},{footer:o(()=>[a(m,{onClick:s[19]||(s[19]=l=>X.value=!1)},{default:o(()=>s[87]||(s[87]=[f("å–æ¶ˆ",-1)])),_:1,__:[87]}),a(m,{type:"primary",onClick:Ye,loading:ge.value,disabled:!Oe.value},{default:o(()=>s[88]||(s[88]=[f(" ç¡®è®¤è´­ä¹° ",-1)])),_:1,__:[88]},8,["loading","disabled"])]),default:o(()=>{var l;return[g.value?(v(),_("div",xl,[e("div",Il,[e("img",{src:g.value.image||"/default-product.jpg",alt:g.value.name,class:"summary-image"},null,8,Vl),e("div",Sl,[e("h4",null,i(g.value.name),1),me.value.length>0?(v(),_("div",$l,[s[80]||(s[80]=e("h4",null,"é€‰æ‹©å¡å¯†ç±»å‹ï¼š",-1)),e("div",zl,[(v(!0),_(R,null,A(me.value,d=>{var h;return v(),_("div",{key:d.id,class:J(["card-type-option",{active:((h=S.value)==null?void 0:h.id)===d.id}]),onClick:j=>Qe(d)},[e("div",Fl,[e("span",Tl,i(d.name),1),a(U,{type:Ge(d.duration),size:"small"},{default:o(()=>[f(i(d.duration),1)]),_:2},1032,["type"])]),e("p",Nl,i(d.description),1),e("div",Pl,[e("span",Ul,"åº“å­˜: "+i(se(d.id))+"å¼ ",1)])],10,Dl)}),128))]),S.value&&se(S.value.id)===0?(v(),_("div",ql,[a(De,{title:"è¯¥ç±»å‹å¡å¯†æš‚æ—¶ç¼ºè´§",type:"warning",closable:!1,"show-icon":""})])):k("",!0)])):k("",!0),e("div",Ml,[s[81]||(s[81]=e("label",null,"è´­ä¹°æ•°é‡ï¼š",-1)),a(B,{modelValue:x.value,"onUpdate:modelValue":s[17]||(s[17]=d=>x.value=d),min:1,max:ce(),size:"default"},null,8,["modelValue","max"]),e("span",Ll," (æœ€å¤šå¯è´­ä¹° "+i(ce())+" å¼ ) ",1)]),$.value.level>0?(v(),_("div",jl,[e("p",El,"åŸä»·ï¼šÂ¥"+i(g.value.price.toFixed(2))+" Ã— "+i(x.value),1),e("p",Ol,[f(i($.value.name)+"ä¼˜æƒ ï¼š"+i((10-$.value.discount*10).toFixed(1))+"æŠ˜ ",1),a(U,{size:"small",type:$.value.level===1?"warning":"",color:$.value.level===2?"#9333ea":"",style:{"margin-left":"8px"}},{default:o(()=>[f(" -Â¥"+i(N(g.value.price,x.value).totalSavings.toFixed(2)),1)]),_:1},8,["type","color"])]),e("p",Bl,"å®ä»˜ï¼šÂ¥"+i(N(g.value.price,x.value).finalTotal.toFixed(2)),1)])):(v(),_("div",Rl,[e("p",Al,"å•ä»·ï¼šÂ¥"+i(g.value.price.toFixed(2)),1),e("p",Jl,"æ•°é‡ï¼š"+i(x.value)+" å¼ ",1),e("p",Hl,"æ€»è®¡ï¼šÂ¥"+i((g.value.price*x.value).toFixed(2)),1),e("div",Zl,[a(K,{to:"/vip",style:{color:"#409eff","font-size":"12px"}},{default:o(()=>s[82]||(s[82]=[f(" å‡çº§VIP/SVIPäº«å—è´­ä¹°ä¼˜æƒ  â†’ ",-1)])),_:1,__:[82]})])]))])]),e("div",Kl,[s[86]||(s[86]=e("h4",null,"é€‰æ‹©æ”¯ä»˜æ–¹å¼ï¼š",-1)),a(ds,{modelValue:O.value,"onUpdate:modelValue":s[18]||(s[18]=d=>O.value=d)},{default:o(()=>[Z.value.alipay?(v(),te(ke,{key:0,label:"alipay"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Me))]),_:1}),s[83]||(s[83]=f(" æ”¯ä»˜å® ",-1))]),_:1,__:[83]})):k("",!0),Z.value.wechat?(v(),te(ke,{key:1,label:"wechat"},{default:o(()=>[a(n,null,{default:o(()=>[a(b(Me))]),_:1}),s[84]||(s[84]=f(" å¾®ä¿¡æ”¯ä»˜ ",-1))]),_:1,__:[84]})):k("",!0),a(ke,{label:"balance"},{default:o(()=>{var d,h;return[a(n,null,{default:o(()=>[a(b($s))]),_:1}),f(" è´¦æˆ·ä½™é¢ (Â¥"+i(((h=(d=b(C).user)==null?void 0:d.balance)==null?void 0:h.toFixed(2))||"0.00")+") ",1)]}),_:1})]),_:1},8,["modelValue"]),O.value==="balance"&&(((l=b(C).user)==null?void 0:l.balance)||0)<N(g.value.price,x.value).finalTotal?(v(),_("div",Ql,[a(De,{title:"ä½™é¢ä¸è¶³",type:"warning",closable:!1},{default:o(()=>{var d;return[e("div",null,[e("p",null,"éœ€è¦æ”¯ä»˜ï¼šÂ¥"+i(N(g.value.price,x.value).finalTotal.toFixed(2)),1),e("p",null,"å½“å‰ä½™é¢ï¼šÂ¥"+i((((d=b(C).user)==null?void 0:d.balance)||0).toFixed(2)),1),s[85]||(s[85]=e("p",null,"è¯·å…ˆå……å€¼æˆ–é€‰æ‹©å…¶ä»–æ”¯ä»˜æ–¹å¼",-1))])]}),_:1})])):k("",!0)])])):k("",!0)]}),_:1},8,["modelValue"])])}}},en=us(Gl,[["__scopeId","data-v-9bb4ac13"]]);export{en as default};
