import{_ as _e,ad as ye,P as te,h as m,a as U,d as y,f as n,e as t,w as s,u as a,t as _,R as u,r as P,b as z,F as re,i as c,k as M,g as ge,n as ie,a0 as G,c as pe,o as Ee,ae as ft,z as Ks,af as Gs,a1 as Xs,E as Zs,j as ct,q as Oe,I as Qs,ag as mt,a8 as pt,a2 as en,ah as tn,X as sn,ai as gt,T as Be,aj as nn,ak as Le,al as Fe,am as on,H as an,an as _t,a3 as Ht,G as ln,B as rn,ao as un,ap as vt}from"./index-ihp2IIuf.js";const dn={class:"payment-settings"},fn={class:"fee-preview"},cn={class:"payment-stats"},mn={class:"stat-item"},pn={class:"stat-value"},gn={class:"stat-item"},_n={class:"stat-value"},Hn={class:"stat-item"},vn={class:"stat-value"},hn={__name:"PaymentSettings",setup(g){const d=ye(),i=d.settings,h=te({todayAmount:"12,586.00",successRate:98.5,totalFee:"1,258.60"}),w=$=>{d.updatePaymentSetting("methods",$),u.success("支付方式已更新")},k=$=>{d.updatePaymentSetting("minAmount",$),u.success("最低充值金额已更新")},V=$=>{d.updatePaymentSetting("feeRate",$),u.success("手续费率已更新")},R=$=>{d.updatePaymentSetting("autoConfirm",$),u.success("自动确认订单设置已更新")},B=$=>{d.updatePaymentSetting("timeout",$),u.success("支付超时时间已更新")};return($,p)=>{const b=m("el-checkbox"),A=m("el-checkbox-group"),x=m("el-form-item"),O=m("el-input-number"),F=m("el-slider"),j=m("el-switch"),C=m("el-option"),r=m("el-select"),N=m("el-form");return y(),U("div",dn,[p[15]||(p[15]=n("div",{class:"section-header"},[n("h3",null,"💳 支付设置"),n("p",null,"配置支付方式和相关参数")],-1)),t(N,{model:a(i).payment,"label-width":"140px"},{default:s(()=>[t(x,{label:"支付方式"},{default:s(()=>[t(A,{modelValue:a(i).payment.methods,"onUpdate:modelValue":p[0]||(p[0]=D=>a(i).payment.methods=D),onChange:w},{default:s(()=>[t(b,{label:"alipay"},{default:s(()=>p[5]||(p[5]=[n("div",{class:"payment-option"},[n("span",{class:"payment-logo"},"💰"),n("span",null,"支付宝")],-1)])),_:1,__:[5]}),t(b,{label:"wechat"},{default:s(()=>p[6]||(p[6]=[n("div",{class:"payment-option"},[n("span",{class:"payment-logo"},"💚"),n("span",null,"微信支付")],-1)])),_:1,__:[6]}),t(b,{label:"bank"},{default:s(()=>p[7]||(p[7]=[n("div",{class:"payment-option"},[n("span",{class:"payment-logo"},"🏦"),n("span",null,"银行卡")],-1)])),_:1,__:[7]}),t(b,{label:"crypto"},{default:s(()=>p[8]||(p[8]=[n("div",{class:"payment-option"},[n("span",{class:"payment-logo"},"₿"),n("span",null,"数字货币")],-1)])),_:1,__:[8]})]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"最低充值金额"},{default:s(()=>[t(O,{modelValue:a(i).payment.minAmount,"onUpdate:modelValue":p[1]||(p[1]=D=>a(i).payment.minAmount=D),min:1,max:1e4,onChange:k},null,8,["modelValue"]),p[9]||(p[9]=n("span",{class:"unit"},"元",-1))]),_:1,__:[9]}),t(x,{label:"手续费率"},{default:s(()=>[t(F,{modelValue:a(i).payment.feeRate,"onUpdate:modelValue":p[2]||(p[2]=D=>a(i).payment.feeRate=D),min:0,max:10,step:.1,"show-tooltip":"",onChange:V},null,8,["modelValue"]),n("span",fn,_(a(i).payment.feeRate)+"%",1)]),_:1}),t(x,{label:"自动确认订单"},{default:s(()=>[t(j,{modelValue:a(i).payment.autoConfirm,"onUpdate:modelValue":p[3]||(p[3]=D=>a(i).payment.autoConfirm=D),onChange:R,"active-text":"启用","inactive-text":"手动"},null,8,["modelValue"]),p[10]||(p[10]=n("div",{class:"setting-hint"},"支付成功后自动确认订单并发货",-1))]),_:1,__:[10]}),t(x,{label:"支付超时时间"},{default:s(()=>[t(r,{modelValue:a(i).payment.timeout,"onUpdate:modelValue":p[4]||(p[4]=D=>a(i).payment.timeout=D),onChange:B},{default:s(()=>[t(C,{label:"5分钟",value:"300"}),t(C,{label:"15分钟",value:"900"}),t(C,{label:"30分钟",value:"1800"}),t(C,{label:"1小时",value:"3600"})]),_:1},8,["modelValue"]),p[11]||(p[11]=n("div",{class:"setting-hint"},"超时未支付的订单将被自动取消",-1))]),_:1,__:[11]}),t(x,{label:"支付统计"},{default:s(()=>[n("div",cn,[n("div",mn,[p[12]||(p[12]=n("span",{class:"stat-label"},"今日交易",-1)),n("span",pn,"¥"+_(h.todayAmount),1)]),n("div",gn,[p[13]||(p[13]=n("span",{class:"stat-label"},"成功率",-1)),n("span",_n,_(h.successRate)+"%",1)]),n("div",Hn,[p[14]||(p[14]=n("span",{class:"stat-label"},"总手续费",-1)),n("span",vn,"¥"+_(h.totalFee),1)])])]),_:1})]),_:1},8,["model"])])}}},yn=_e(hn,[["__scopeId","data-v-f5144126"]]),xn={class:"email-settings"},wn={class:"action-buttons"},Sn={__name:"EmailSettings",setup(g){const d=ye(),i=d.settings,h=P(!1),w=P(""),k=$=>{d.updateEmailSetting("enabled",$),u.success($?"邮件服务已启用":"邮件服务已关闭")},V=()=>{d.saveEmailConfig(),u.success("邮件配置已保存")},R=$=>{d.updateEmailSetting("types",$),u.success("邮件类型配置已更新")},B=async()=>{if(!w.value){u.error("请输入测试邮箱地址");return}h.value=!0;try{await new Promise($=>setTimeout($,2e3)),u.success(`测试邮件已发送至 ${w.value}`)}catch{u.error("测试邮件发送失败")}finally{h.value=!1}};return($,p)=>{const b=m("el-switch"),A=m("el-form-item"),x=m("el-input"),O=m("el-input-number"),F=m("el-radio"),j=m("el-radio-group"),C=m("el-checkbox"),r=m("el-checkbox-group"),N=m("el-button"),D=m("el-form");return y(),U("div",xn,[p[16]||(p[16]=n("div",{class:"section-header"},[n("h3",null,"📧 邮件服务"),n("p",null,"配置SMTP服务器和邮件模板")],-1)),t(D,{model:a(i).email,"label-width":"140px"},{default:s(()=>[t(A,{label:"邮件服务"},{default:s(()=>[t(b,{modelValue:a(i).email.enabled,"onUpdate:modelValue":p[0]||(p[0]=H=>a(i).email.enabled=H),onChange:k,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),a(i).email.enabled?(y(),U(re,{key:0},[t(A,{label:"SMTP服务器"},{default:s(()=>[t(x,{modelValue:a(i).email.smtpHost,"onUpdate:modelValue":p[1]||(p[1]=H=>a(i).email.smtpHost=H),placeholder:"smtp.gmail.com",onChange:V},null,8,["modelValue"])]),_:1}),t(A,{label:"SMTP端口"},{default:s(()=>[t(O,{modelValue:a(i).email.smtpPort,"onUpdate:modelValue":p[2]||(p[2]=H=>a(i).email.smtpPort=H),min:1,max:65535,onChange:V},null,8,["modelValue"])]),_:1}),t(A,{label:"发件邮箱"},{default:s(()=>[t(x,{modelValue:a(i).email.fromEmail,"onUpdate:modelValue":p[3]||(p[3]=H=>a(i).email.fromEmail=H),placeholder:"noreply@yoursite.com",onChange:V},null,8,["modelValue"])]),_:1}),t(A,{label:"邮箱密码"},{default:s(()=>[t(x,{modelValue:a(i).email.password,"onUpdate:modelValue":p[4]||(p[4]=H=>a(i).email.password=H),type:"password","show-password":"",placeholder:"应用专用密码",onChange:V},null,8,["modelValue"])]),_:1}),t(A,{label:"加密方式"},{default:s(()=>[t(j,{modelValue:a(i).email.encryption,"onUpdate:modelValue":p[5]||(p[5]=H=>a(i).email.encryption=H),onChange:V},{default:s(()=>[t(F,{label:"none"},{default:s(()=>p[8]||(p[8]=[c("无加密",-1)])),_:1,__:[8]}),t(F,{label:"tls"},{default:s(()=>p[9]||(p[9]=[c("TLS",-1)])),_:1,__:[9]}),t(F,{label:"ssl"},{default:s(()=>p[10]||(p[10]=[c("SSL",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),t(A,{label:"邮件类型"},{default:s(()=>[t(r,{modelValue:a(i).email.types,"onUpdate:modelValue":p[6]||(p[6]=H=>a(i).email.types=H),onChange:R},{default:s(()=>[t(C,{label:"register"},{default:s(()=>p[11]||(p[11]=[c("注册通知",-1)])),_:1,__:[11]}),t(C,{label:"purchase"},{default:s(()=>p[12]||(p[12]=[c("购买确认",-1)])),_:1,__:[12]}),t(C,{label:"delivery"},{default:s(()=>p[13]||(p[13]=[c("发货通知",-1)])),_:1,__:[13]}),t(C,{label:"security"},{default:s(()=>p[14]||(p[14]=[c("安全警报",-1)])),_:1,__:[14]})]),_:1},8,["modelValue"])]),_:1}),t(A,{label:"测试邮件"},{default:s(()=>[n("div",wn,[t(N,{onClick:B,size:"small",loading:h.value},{default:s(()=>p[15]||(p[15]=[c(" 发送测试邮件 ",-1)])),_:1,__:[15]},8,["loading"]),t(x,{modelValue:w.value,"onUpdate:modelValue":p[7]||(p[7]=H=>w.value=H),placeholder:"测试邮箱地址",style:{width:"200px","margin-left":"10px"}},null,8,["modelValue"])])]),_:1})],64)):z("",!0)]),_:1},8,["model"])])}}},bn=_e(Sn,[["__scopeId","data-v-cfa0f5fd"]]),kn={class:"security-settings"},Cn={class:"ip-list"},Vn={class:"session-info"},An={class:"info-row"},Tn={class:"info-row"},In={__name:"SecuritySettings",setup(g){const d=ye(),i=d.settings,h=te({activeSessions:3,suspiciousLogins:1}),w=A=>{d.updateSecuritySetting("loginSecurity",A),u.success(A?"登录安全已强化":"登录安全已设为标准")},k=A=>{d.updateSecuritySetting("ipWhitelist",A),u.success(A?"IP白名单已启用":"IP白名单已关闭")},V=()=>{i.security.allowedIPs||(i.security.allowedIPs=[]),i.security.allowedIPs.push("")},R=A=>{i.security.allowedIPs.splice(A,1)},B=A=>{d.updateSecuritySetting("operationLog",A),u.success(A?"操作日志记录已启用":"操作日志记录已关闭")},$=A=>{d.updateSecuritySetting("dataEncryption",A),u.success(A?"数据加密已启用":"数据加密已关闭")},p=()=>{u.info("查看活跃会话功能开发中...")},b=()=>{u.info("查看可疑登录功能开发中...")};return(A,x)=>{const O=m("el-switch"),F=m("el-form-item"),j=m("el-input"),C=m("el-button"),r=m("el-form");return y(),U("div",kn,[x[12]||(x[12]=n("div",{class:"section-header"},[n("h3",null,"🛡️ 安全中心"),n("p",null,"系统安全策略和访问控制")],-1)),t(r,{model:a(i).security,"label-width":"140px"},{default:s(()=>[t(F,{label:"登录安全"},{default:s(()=>[t(O,{modelValue:a(i).security.loginSecurity,"onUpdate:modelValue":x[0]||(x[0]=N=>a(i).security.loginSecurity=N),onChange:w,"active-text":"强化","inactive-text":"标准"},null,8,["modelValue"]),x[4]||(x[4]=n("div",{class:"setting-hint"},"启用密码复杂度验证和登录尝试限制",-1))]),_:1,__:[4]}),t(F,{label:"IP白名单"},{default:s(()=>[t(O,{modelValue:a(i).security.ipWhitelist,"onUpdate:modelValue":x[1]||(x[1]=N=>a(i).security.ipWhitelist=N),onChange:k,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),x[5]||(x[5]=n("div",{class:"setting-hint"},"只允许白名单IP访问管理后台",-1))]),_:1,__:[5]}),a(i).security.ipWhitelist?(y(),M(F,{key:0,label:"白名单列表"},{default:s(()=>[n("div",Cn,[(y(!0),U(re,null,ge(a(i).security.allowedIPs,(N,D)=>(y(),U("div",{key:D,class:"ip-item"},[t(j,{modelValue:a(i).security.allowedIPs[D],"onUpdate:modelValue":H=>a(i).security.allowedIPs[D]=H,placeholder:"192.168.1.1"},null,8,["modelValue","onUpdate:modelValue"]),t(C,{onClick:H=>R(D),type:"danger",size:"small"},{default:s(()=>x[6]||(x[6]=[c("删除",-1)])),_:2,__:[6]},1032,["onClick"])]))),128)),t(C,{onClick:V,size:"small"},{default:s(()=>x[7]||(x[7]=[c("添加IP",-1)])),_:1,__:[7]})])]),_:1})):z("",!0),t(F,{label:"操作日志"},{default:s(()=>[t(O,{modelValue:a(i).security.operationLog,"onUpdate:modelValue":x[2]||(x[2]=N=>a(i).security.operationLog=N),onChange:B,"active-text":"记录","inactive-text":"关闭"},null,8,["modelValue"]),x[8]||(x[8]=n("div",{class:"setting-hint"},"记录所有敏感操作，便于审计",-1))]),_:1,__:[8]}),t(F,{label:"数据加密"},{default:s(()=>[t(O,{modelValue:a(i).security.dataEncryption,"onUpdate:modelValue":x[3]||(x[3]=N=>a(i).security.dataEncryption=N),onChange:$,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),x[9]||(x[9]=n("div",{class:"setting-hint"},"敏感数据存储时进行AES加密",-1))]),_:1,__:[9]}),t(F,{label:"会话管理"},{default:s(()=>[n("div",Vn,[n("div",An,[n("span",null,"当前会话数: "+_(h.activeSessions),1),t(C,{onClick:p,size:"small"},{default:s(()=>x[10]||(x[10]=[c("查看详情",-1)])),_:1,__:[10]})]),n("div",Tn,[n("span",null,"可疑登录: "+_(h.suspiciousLogins),1),t(C,{onClick:b,size:"small",type:"warning"},{default:s(()=>x[11]||(x[11]=[c("查看详情",-1)])),_:1,__:[11]})])])]),_:1})]),_:1},8,["model"])])}}},Dn=_e(In,[["__scopeId","data-v-9fb6e704"]]),Un={class:"api-settings"},$n={class:"api-keys"},Ln={class:"key-info"},En={class:"key-name"},Pn={class:"key-value"},Nn={class:"key-meta"},zn={class:"create-time"},Rn={class:"last-used"},Mn={class:"key-actions"},On={class:"create-key"},Bn={class:"api-stats"},Fn={class:"stat-item"},Yn={class:"stat-value"},jn={class:"stat-item"},Wn={class:"stat-value"},Jn={class:"stat-item"},qn={class:"stat-value"},Kn={__name:"ApiSettings",setup(g){const d=ye(),i=d.settings,h=P([{id:1,name:"移动端应用",key:"sk-live-123456789abcdef...",status:"active",createTime:"2024-01-01",lastUsed:"2小时前"},{id:2,name:"网页接口",key:"sk-test-987654321fedcba...",status:"inactive",createTime:"2024-01-10",lastUsed:"从未使用"}]),w=te({todayRequests:1250,successRate:99.2,activeApps:5}),k=p=>{p.status=p.status==="active"?"inactive":"active",u.success(`API密钥已${p.status==="active"?"启用":"禁用"}`)},V=p=>{G.confirm("重新生成API密钥将使旧密钥失效，确认继续？","确认操作").then(()=>{p.key="sk-"+Math.random().toString(36).substr(2,24)+"...",u.success("API密钥已重新生成")})},R=p=>{G.confirm("删除API密钥后无法恢复，确认删除？","确认删除",{type:"warning"}).then(()=>{const b=h.value.findIndex(A=>A.id===p.id);b>-1&&(h.value.splice(b,1),u.success("API密钥已删除"))})},B=p=>{d.updateApiSetting("rateLimit",p),u.success("API请求限制已更新")},$=()=>{d.saveApiConfig(),u.success("CORS设置已保存")};return(p,b)=>{const A=m("el-button"),x=m("el-input-number"),O=m("el-form-item"),F=m("el-switch"),j=m("el-input"),C=m("el-form");return y(),U("div",Un,[b[10]||(b[10]=n("div",{class:"section-header"},[n("h3",null,"🔗 API管理"),n("p",null,"管理API密钥和接口权限")],-1)),n("div",$n,[(y(!0),U(re,null,ge(h.value,r=>(y(),U("div",{class:"api-key-item",key:r.id},[n("div",Ln,[n("div",En,_(r.name),1),n("div",Pn,_(r.key),1),n("div",Nn,[n("span",zn,"创建于 "+_(r.createTime),1),n("span",Rn,"最后使用 "+_(r.lastUsed),1),n("span",{class:ie(["status",r.status])},_(r.status==="active"?"活跃":"已禁用"),3)])]),n("div",Mn,[t(A,{onClick:N=>k(r),size:"small",type:r.status==="active"?"warning":"success"},{default:s(()=>[c(_(r.status==="active"?"禁用":"启用"),1)]),_:2},1032,["onClick","type"]),t(A,{onClick:N=>V(r),size:"small"},{default:s(()=>b[3]||(b[3]=[c("重新生成",-1)])),_:2,__:[3]},1032,["onClick"]),t(A,{onClick:N=>R(r),size:"small",type:"danger"},{default:s(()=>b[4]||(b[4]=[c("删除",-1)])),_:2,__:[4]},1032,["onClick"])])]))),128)),n("div",On,[t(A,{type:"primary"},{default:s(()=>b[5]||(b[5]=[c("创建新API密钥",-1)])),_:1,__:[5]})])]),t(C,{model:a(i).api,"label-width":"140px"},{default:s(()=>[t(O,{label:"请求限制"},{default:s(()=>[t(x,{modelValue:a(i).api.rateLimit,"onUpdate:modelValue":b[0]||(b[0]=r=>a(i).api.rateLimit=r),min:1,max:1e4,onChange:B},null,8,["modelValue"]),b[6]||(b[6]=n("span",{class:"unit"},"次/分钟",-1))]),_:1,__:[6]}),t(O,{label:"CORS设置"},{default:s(()=>[t(F,{modelValue:a(i).api.corsEnabled,"onUpdate:modelValue":b[1]||(b[1]=r=>a(i).api.corsEnabled=r),onChange:$,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"])]),_:1}),a(i).api.corsEnabled?(y(),M(O,{key:0,label:"允许域名"},{default:s(()=>[t(j,{modelValue:a(i).api.allowedOrigins,"onUpdate:modelValue":b[2]||(b[2]=r=>a(i).api.allowedOrigins=r),type:"textarea",placeholder:`https://example.com
https://app.example.com`,onChange:$},null,8,["modelValue"])]),_:1})):z("",!0),t(O,{label:"API统计"},{default:s(()=>[n("div",Bn,[n("div",Fn,[b[7]||(b[7]=n("span",{class:"stat-label"},"今日请求",-1)),n("span",Yn,_(w.todayRequests),1)]),n("div",jn,[b[8]||(b[8]=n("span",{class:"stat-label"},"成功率",-1)),n("span",Wn,_(w.successRate)+"%",1)]),n("div",Jn,[b[9]||(b[9]=n("span",{class:"stat-label"},"活跃应用",-1)),n("span",qn,_(w.activeApps),1)])])]),_:1})]),_:1},8,["model"])])}}},Gn=_e(Kn,[["__scopeId","data-v-43025435"]]),Xn={class:"system-logs"},Zn={class:"log-controls"},Qn={class:"log-table"},eo={key:0,class:"log-detail"},to={__name:"SystemLogs",setup(g){const d=P(!1),i=P(!1),h=P(null),w=te({level:"all",dateRange:null}),k=te({currentPage:1,pageSize:20}),V=P([{id:1,time:new Date("2024-08-07 14:30:25"),level:"info",module:"用户管理",message:"用户登录成功",user:"admin",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",details:'{"action":"login","success":true,"loginMethod":"password"}'},{id:2,time:new Date("2024-08-07 14:25:10"),level:"warning",module:"支付系统",message:"支付超时",user:"user123",ip:"192.168.1.101",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X)",details:'{"orderId":"ORD20240807001","amount":99.00,"timeout":1800}'},{id:3,time:new Date("2024-08-07 14:20:05"),level:"error",module:"数据库",message:"数据库连接失败",user:"system",ip:"127.0.0.1",userAgent:"Internal System",details:'{"error":"Connection timeout","host":"localhost:3306","retries":3}'},{id:4,time:new Date("2024-08-07 14:15:30"),level:"info",module:"卡密管理",message:"批量生成卡密",user:"admin",ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",details:'{"count":100,"category":"月卡","value":30.00}'}]),R=pe(()=>{let C=V.value;if(w.level!=="all"&&(C=C.filter(D=>D.level===w.level)),w.dateRange&&w.dateRange.length===2){const D=new Date(w.dateRange[0]),H=new Date(w.dateRange[1]);H.setHours(23,59,59,999),C=C.filter(v=>{const Z=new Date(v.time);return Z>=D&&Z<=H})}const r=(k.currentPage-1)*k.pageSize,N=r+k.pageSize;return C.slice(r,N)}),B=()=>{k.currentPage=1},$=async()=>{d.value=!0;try{await new Promise(C=>setTimeout(C,1e3)),u.success("日志已刷新")}finally{d.value=!1}},p=()=>{u.info("导出日志功能开发中...")},b=()=>{G.confirm("清空日志后无法恢复，确认清空？","确认清空",{type:"warning"}).then(()=>{V.value=[],u.success("日志已清空")})},A=C=>{h.value=C,i.value=!0},x=C=>new Date(C).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),O=C=>({info:"",warning:"warning",error:"danger"})[C]||"",F=C=>{k.pageSize=C,k.currentPage=1},j=C=>{k.currentPage=C};return Ee(()=>{}),(C,r)=>{const N=m("el-option"),D=m("el-select"),H=m("el-form-item"),v=m("el-date-picker"),Z=m("el-button"),se=m("el-form"),Q=m("el-table-column"),Y=m("el-tag"),J=m("el-table"),xe=m("el-pagination"),X=m("el-descriptions-item"),fe=m("el-descriptions"),ae=m("el-dialog");return y(),U("div",Xn,[r[9]||(r[9]=n("div",{class:"section-header"},[n("h3",null,"📋 系统日志"),n("p",null,"查看和管理系统操作日志")],-1)),n("div",Zn,[t(se,{inline:""},{default:s(()=>[t(H,{label:"日志级别"},{default:s(()=>[t(D,{modelValue:w.level,"onUpdate:modelValue":r[0]||(r[0]=q=>w.level=q),onChange:B,placeholder:"选择级别"},{default:s(()=>[t(N,{label:"全部",value:"all"}),t(N,{label:"信息",value:"info"}),t(N,{label:"警告",value:"warning"}),t(N,{label:"错误",value:"error"})]),_:1},8,["modelValue"])]),_:1}),t(H,{label:"日期范围"},{default:s(()=>[t(v,{modelValue:w.dateRange,"onUpdate:modelValue":r[1]||(r[1]=q=>w.dateRange=q),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:B},null,8,["modelValue"])]),_:1}),t(H,null,{default:s(()=>[t(Z,{onClick:$,loading:d.value},{default:s(()=>r[5]||(r[5]=[c("刷新",-1)])),_:1,__:[5]},8,["loading"]),t(Z,{onClick:p,type:"primary"},{default:s(()=>r[6]||(r[6]=[c("导出日志",-1)])),_:1,__:[6]}),t(Z,{onClick:b,type:"danger"},{default:s(()=>r[7]||(r[7]=[c("清空日志",-1)])),_:1,__:[7]})]),_:1})]),_:1})]),n("div",Qn,[t(J,{data:R.value,style:{width:"100%"},"max-height":"400"},{default:s(()=>[t(Q,{prop:"time",label:"时间",width:"180"},{default:s(q=>[n("span",null,_(x(q.row.time)),1)]),_:1}),t(Q,{prop:"level",label:"级别",width:"80"},{default:s(q=>[t(Y,{type:O(q.row.level),size:"small"},{default:s(()=>[c(_(q.row.level.toUpperCase()),1)]),_:2},1032,["type"])]),_:1}),t(Q,{prop:"module",label:"模块",width:"120"}),t(Q,{prop:"message",label:"消息","min-width":"200"}),t(Q,{prop:"user",label:"用户",width:"100"}),t(Q,{prop:"ip",label:"IP地址",width:"120"}),t(Q,{label:"操作",width:"80"},{default:s(q=>[t(Z,{onClick:Ce=>A(q.row),size:"small",type:"primary",link:""},{default:s(()=>r[8]||(r[8]=[c(" 详情 ",-1)])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(xe,{"current-page":k.currentPage,"onUpdate:currentPage":r[2]||(r[2]=q=>k.currentPage=q),"page-size":k.pageSize,"onUpdate:pageSize":r[3]||(r[3]=q=>k.pageSize=q),"page-sizes":[10,20,50,100],total:V.value.length,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:F,onCurrentChange:j,style:{"margin-top":"16px"}},null,8,["current-page","page-size","total"])]),t(ae,{modelValue:i.value,"onUpdate:modelValue":r[4]||(r[4]=q=>i.value=q),title:"日志详情",width:"60%"},{default:s(()=>[h.value?(y(),U("div",eo,[t(fe,{column:2,border:""},{default:s(()=>[t(X,{label:"时间"},{default:s(()=>[c(_(x(h.value.time)),1)]),_:1}),t(X,{label:"级别"},{default:s(()=>[t(Y,{type:O(h.value.level)},{default:s(()=>[c(_(h.value.level.toUpperCase()),1)]),_:1},8,["type"])]),_:1}),t(X,{label:"模块"},{default:s(()=>[c(_(h.value.module),1)]),_:1}),t(X,{label:"用户"},{default:s(()=>[c(_(h.value.user),1)]),_:1}),t(X,{label:"IP地址"},{default:s(()=>[c(_(h.value.ip),1)]),_:1}),t(X,{label:"用户代理",span:"2"},{default:s(()=>[c(_(h.value.userAgent),1)]),_:1}),t(X,{label:"消息",span:"2"},{default:s(()=>[c(_(h.value.message),1)]),_:1}),t(X,{label:"详细信息",span:"2"},{default:s(()=>[n("pre",null,_(h.value.details),1)]),_:1})]),_:1})])):z("",!0)]),_:1},8,["modelValue"])])}}},so=_e(to,[["__scopeId","data-v-93b9dedf"]]),no={class:"backup-settings"},oo={class:"backup-actions"},ao={class:"backup-history"},lo={class:"restore-content"},io={class:"restore-options",style:{"margin-top":"20px"}},ro={key:0,style:{"margin-top":"16px"}},uo={key:1,style:{"margin-top":"16px"}},fo={class:"dialog-footer"},co={__name:"BackupSettings",setup(g){const d=ye(),i=d.settings,h=P(!1),w=P(!1),k=P(!1),V=P("file"),R=P(""),B=P(),$=P([{id:1,filename:"backup_20240807_143025.json",size:"2.5MB",createTime:new Date("2024-08-07 14:30:25"),type:"auto"},{id:2,filename:"backup_20240806_143025.json",size:"2.3MB",createTime:new Date("2024-08-06 14:30:25"),type:"auto"},{id:3,filename:"manual_backup_20240805.json",size:"2.1MB",createTime:new Date("2024-08-05 10:15:30"),type:"manual"}]),p=H=>{d.updateBackupSetting("enabled",H),u.success(H?"自动备份已启用":"自动备份已关闭")},b=H=>{d.updateBackupSetting("frequency",H),u.success("备份频率已更新")},A=H=>{d.updateBackupSetting("time",H),u.success("备份时间已更新")},x=H=>{d.updateBackupSetting("keepCount",H),u.success("备份保留份数已更新")},O=async()=>{h.value=!0;try{await new Promise(Z=>setTimeout(Z,2e3));const H=new Date,v=`manual_backup_${H.getFullYear()}${(H.getMonth()+1).toString().padStart(2,"0")}${H.getDate().toString().padStart(2,"0")}_${H.getHours().toString().padStart(2,"0")}${H.getMinutes().toString().padStart(2,"0")}.json`;$.value.unshift({id:Date.now(),filename:v,size:"2.4MB",createTime:H,type:"manual"}),u.success("备份创建成功")}catch{u.error("备份创建失败")}finally{h.value=!1}},F=()=>{k.value=!0,V.value="file",R.value=""},j=async()=>{if(V.value==="file"&&!R.value){u.error("请选择要恢复的备份文件");return}if(V.value==="upload"&&(!B.value||B.value.uploadFiles.length===0)){u.error("请选择要上传的备份文件");return}try{await G.confirm("确认要恢复数据吗？此操作将覆盖当前所有数据且无法撤销！","确认恢复",{type:"warning",confirmButtonText:"确认恢复",cancelButtonText:"取消"}),w.value=!0,await new Promise(H=>setTimeout(H,3e3)),u.success("数据恢复成功，请重新登录"),k.value=!1}catch(H){H!=="cancel"&&u.error("数据恢复失败")}finally{w.value=!1}},C=H=>{u.success(`正在下载 ${H.filename}`)},r=async H=>{try{await G.confirm(`确认要恢复备份文件 "${H.filename}" 吗？`,"确认恢复",{type:"warning"}),w.value=!0,await new Promise(v=>setTimeout(v,2e3)),u.success("数据恢复成功")}catch(v){v!=="cancel"&&u.error("数据恢复失败")}finally{w.value=!1}},N=async H=>{try{await G.confirm(`确认删除备份文件 "${H.filename}" 吗？`,"确认删除",{type:"warning"});const v=$.value.findIndex(Z=>Z.id===H.id);v>-1&&($.value.splice(v,1),u.success("备份文件已删除"))}catch(v){v!=="cancel"&&u.error("删除失败")}},D=H=>new Date(H).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return Ee(()=>{}),(H,v)=>{const Z=m("el-switch"),se=m("el-form-item"),Q=m("el-option"),Y=m("el-select"),J=m("el-time-picker"),xe=m("el-input-number"),X=m("el-button"),fe=m("el-form"),ae=m("el-table-column"),q=m("el-tag"),Ce=m("el-table"),Ve=m("el-alert"),He=m("el-radio"),we=m("el-radio-group"),ue=m("el-upload"),K=m("el-dialog");return y(),U("div",no,[v[24]||(v[24]=n("div",{class:"section-header"},[n("h3",null,"💾 备份恢复"),n("p",null,"数据备份和恢复管理")],-1)),t(fe,{model:a(i).backup,"label-width":"140px"},{default:s(()=>[t(se,{label:"自动备份"},{default:s(()=>[t(Z,{modelValue:a(i).backup.enabled,"onUpdate:modelValue":v[0]||(v[0]=E=>a(i).backup.enabled=E),onChange:p,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),v[8]||(v[8]=n("div",{class:"setting-hint"},"定期自动备份重要数据",-1))]),_:1,__:[8]}),a(i).backup.enabled?(y(),U(re,{key:0},[t(se,{label:"备份频率"},{default:s(()=>[t(Y,{modelValue:a(i).backup.frequency,"onUpdate:modelValue":v[1]||(v[1]=E=>a(i).backup.frequency=E),onChange:b},{default:s(()=>[t(Q,{label:"每天",value:"daily"}),t(Q,{label:"每周",value:"weekly"}),t(Q,{label:"每月",value:"monthly"})]),_:1},8,["modelValue"])]),_:1}),t(se,{label:"备份时间"},{default:s(()=>[t(J,{modelValue:a(i).backup.time,"onUpdate:modelValue":v[2]||(v[2]=E=>a(i).backup.time=E),format:"HH:mm",placeholder:"选择备份时间",onChange:A},null,8,["modelValue"]),v[9]||(v[9]=n("div",{class:"setting-hint"},"系统将在指定时间执行备份",-1))]),_:1,__:[9]}),t(se,{label:"保留份数"},{default:s(()=>[t(xe,{modelValue:a(i).backup.keepCount,"onUpdate:modelValue":v[3]||(v[3]=E=>a(i).backup.keepCount=E),min:1,max:30,onChange:x},null,8,["modelValue"]),v[10]||(v[10]=n("span",{class:"unit"},"个",-1)),v[11]||(v[11]=n("div",{class:"setting-hint"},"超过此数量的备份文件将被自动删除",-1))]),_:1,__:[10,11]})],64)):z("",!0),t(se,{label:"手动操作"},{default:s(()=>[n("div",oo,[t(X,{onClick:O,type:"primary",loading:h.value},{default:s(()=>v[12]||(v[12]=[c(" 立即备份 ",-1)])),_:1,__:[12]},8,["loading"]),t(X,{onClick:F},{default:s(()=>v[13]||(v[13]=[c("恢复数据",-1)])),_:1,__:[13]})])]),_:1})]),_:1},8,["model"]),n("div",ao,[v[17]||(v[17]=n("h4",null,"备份历史",-1)),t(Ce,{data:$.value,style:{width:"100%"}},{default:s(()=>[t(ae,{prop:"filename",label:"文件名","min-width":"200"}),t(ae,{prop:"size",label:"大小",width:"100"}),t(ae,{prop:"createTime",label:"创建时间",width:"180"},{default:s(E=>[n("span",null,_(D(E.row.createTime)),1)]),_:1}),t(ae,{prop:"type",label:"类型",width:"100"},{default:s(E=>[t(q,{type:E.row.type==="auto"?"":"success",size:"small"},{default:s(()=>[c(_(E.row.type==="auto"?"自动":"手动"),1)]),_:2},1032,["type"])]),_:1}),t(ae,{label:"操作",width:"150"},{default:s(E=>[t(X,{onClick:Ae=>C(E.row),size:"small",type:"primary",link:""},{default:s(()=>v[14]||(v[14]=[c(" 下载 ",-1)])),_:2,__:[14]},1032,["onClick"]),t(X,{onClick:Ae=>r(E.row),size:"small",type:"warning"},{default:s(()=>v[15]||(v[15]=[c(" 恢复 ",-1)])),_:2,__:[15]},1032,["onClick"]),t(X,{onClick:Ae=>N(E.row),size:"small",type:"danger",link:""},{default:s(()=>v[16]||(v[16]=[c(" 删除 ",-1)])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(K,{modelValue:k.value,"onUpdate:modelValue":v[7]||(v[7]=E=>k.value=E),title:"恢复数据",width:"50%"},{footer:s(()=>[n("span",fo,[t(X,{onClick:v[6]||(v[6]=E=>k.value=!1)},{default:s(()=>v[22]||(v[22]=[c("取消",-1)])),_:1,__:[22]}),t(X,{type:"primary",onClick:j,loading:w.value},{default:s(()=>v[23]||(v[23]=[c(" 确认恢复 ",-1)])),_:1,__:[23]},8,["loading"])])]),default:s(()=>[n("div",lo,[t(Ve,{title:"注意",description:"恢复数据将覆盖当前所有数据，此操作无法撤销！",type:"warning","show-icon":"",closable:!1}),n("div",io,[t(we,{modelValue:V.value,"onUpdate:modelValue":v[4]||(v[4]=E=>V.value=E)},{default:s(()=>[t(He,{label:"file"},{default:s(()=>v[18]||(v[18]=[c("从备份文件恢复",-1)])),_:1,__:[18]}),t(He,{label:"upload"},{default:s(()=>v[19]||(v[19]=[c("上传备份文件",-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])]),V.value==="file"?(y(),U("div",ro,[t(Y,{modelValue:R.value,"onUpdate:modelValue":v[5]||(v[5]=E=>R.value=E),placeholder:"选择备份文件",style:{width:"100%"}},{default:s(()=>[(y(!0),U(re,null,ge($.value,E=>(y(),M(Q,{key:E.id,label:`${E.filename} (${D(E.createTime)})`,value:E.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):z("",!0),V.value==="upload"?(y(),U("div",uo,[t(ue,{ref_key:"uploadRef",ref:B,"auto-upload":!1,"show-file-list":!0,accept:".json,.sql",limit:1},{trigger:s(()=>[t(X,{type:"primary"},{default:s(()=>v[20]||(v[20]=[c("选择文件",-1)])),_:1,__:[20]})]),tip:s(()=>v[21]||(v[21]=[n("div",{class:"el-upload__tip"}," 只能上传 json/sql 文件，且不超过 50MB ",-1)])),_:1},512)])):z("",!0)])]),_:1},8,["modelValue"])])}}},mo=_e(co,[["__scopeId","data-v-c57465cf"]]),po=g=>({"zh-CN":"简体中文","zh-TW":"繁體中文","en-US":"English"})[g]||"简体中文",go=(g="Asia/Shanghai")=>{try{return new Date().toLocaleString("zh-CN",{timeZone:g,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return new Date().toLocaleString()}},Ye=g=>{const d=new Date,i=d.getFullYear(),h=String(d.getMonth()+1).padStart(2,"0"),w=String(d.getDate()).padStart(2,"0");switch(g){case"YYYY-MM-DD":return`${i}-${h}-${w}`;case"MM/DD/YYYY":return`${h}/${w}/${i}`;case"DD/MM/YYYY":return`${w}/${h}/${i}`;default:return`${i}-${h}-${w}`}},_o=(g,d)=>{switch(d){case"1,234.56":return g.toLocaleString("en-US",{minimumFractionDigits:2});case"1.234,56":return g.toLocaleString("de-DE",{minimumFractionDigits:2});case"1 234.56":return g.toLocaleString("fr-FR",{minimumFractionDigits:2});default:return g.toLocaleString("en-US",{minimumFractionDigits:2})}},Ho=()=>{let g=0;for(let d in localStorage)localStorage.hasOwnProperty(d)&&(g+=localStorage[d].length+d.length);return Math.round(g/1024)},ht=(g,d=0)=>{try{const i=JSON.parse(localStorage.getItem(g)||"[]");return Array.isArray(i)?i.length:d}catch{return d}},vo=async()=>{try{await new Promise(i=>setTimeout(i,2e3));const g="1.0.0",d="1.0.0";return{hasUpdate:g!==d,currentVersion:g,latestVersion:d,updateInfo:{changelog:["修复了已知的安全问题","优化了系统性能","添加了新的功能特性"],releaseDate:"2024-01-15",isRequired:!1}}}catch{throw new Error("检查更新失败")}},ho=()=>[{id:"getting-started",title:"快速开始",description:"了解如何使用卡密管理系统",content:`
## 快速开始指南

### 1. 用户注册与登录
- 首次使用需要注册账户
- 登录后可以访问系统所有功能

### 2. 卡密管理
- 生成卡密：批量创建卡密
- 查询卡密：查看卡密状态和使用情况
- 删除卡密：删除无效或过期的卡密

### 3. 系统设置
- 外观设置：自定义主题和界面
- 通知设置：配置系统通知
- 安全设置：密码和权限管理
      `},{id:"card-management",title:"卡密管理",description:"卡密的生成、查询和管理",content:`
## 卡密管理详解

### 卡密生成
1. 设置卡密类型和有效期
2. 选择生成数量
3. 批量生成并导出

### 卡密查询
1. 按条件筛选卡密
2. 查看使用状态
3. 导出查询结果

### 安全注意事项
- 定期备份重要数据
- 及时删除过期卡密
- 设置强密码保护账户
      `}],yo=async g=>{try{await new Promise(i=>setTimeout(i,1e3));const d={userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,timestamp:new Date().toISOString(),url:window.location.href,...g};return console.log("错误报告已提交:",d),{success:!0,reportId:Date.now().toString(),message:"感谢您的反馈，我们会尽快处理"}}catch{throw new Error("提交报告失败")}},xo=()=>{const g=JSON.parse(localStorage.getItem("notification_history")||"[]");if(g.length===0){const d=wo();return localStorage.setItem("notification_history",JSON.stringify(d)),d}return g.sort((d,i)=>new Date(i.timestamp)-new Date(d.timestamp))},wo=()=>{const g=[],d=["order","payment","security","system"],i={order:["新订单提醒","订单状态更新","订单完成通知"],payment:["支付成功","余额不足","充值到账"],security:["登录异常","密码修改","安全警告"],system:["系统更新","维护通知","功能上线"]},h={order:["您有新的订单需要处理","订单状态已更新，请查看","订单已完成，感谢使用"],payment:["支付操作已成功完成","账户余额不足，请及时充值","充值金额已到账"],security:["检测到异常登录行为","密码已成功修改","发现潜在安全风险"],system:["系统已更新到最新版本","系统将进行维护升级","新功能已上线，欢迎体验"]};for(let w=0;w<30;w++){const k=d[Math.floor(Math.random()*d.length)],V=i[k],R=h[k];g.push({id:Date.now()+w,type:k,title:V[Math.floor(Math.random()*V.length)],body:R[Math.floor(Math.random()*R.length)],timestamp:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),read:Math.random()>.3,priority:["low","normal","high"][Math.floor(Math.random()*3)]})}return g},xt=()=>{const g=window.performance,d=g.memory||{};return{memoryUsage:d.usedJSHeapSize?Math.round(d.usedJSHeapSize/d.jsHeapSizeLimit*100):Math.floor(Math.random()*30)+20,responseTime:Math.round(g.now()%100)+50,cpuUsage:Math.floor(Math.random()*20)+10}},So=async()=>{const g={startTime:performance.now(),tests:[]},d=performance.now(),i=document.createElement("div");i.innerHTML="<p>Performance Test</p>".repeat(1e3),document.body.appendChild(i),document.body.removeChild(i);const h=performance.now();g.tests.push({name:"DOM渲染",duration:Math.round(h-d),status:h-d<50?"good":"warning"});const w=performance.now(),k=JSON.stringify({test:"data".repeat(1e3)});localStorage.setItem("perf_test",k),JSON.parse(localStorage.getItem("perf_test")),localStorage.removeItem("perf_test");const V=performance.now();g.tests.push({name:"本地存储",duration:Math.round(V-w),status:V-w<20?"good":"warning"});const R=performance.now(),B=performance.now();return g.tests.push({name:"计算性能",duration:Math.round(B-R),status:B-R<30?"good":"warning"}),g.endTime=performance.now(),g.totalDuration=Math.round(g.endTime-g.startTime),g},bo=async()=>{const g=[];let d=0;try{localStorage.setItem("diagnostic_test","test"),localStorage.removeItem("diagnostic_test"),g.push({name:"本地存储",status:"pass",description:"本地存储功能正常"}),d++}catch{g.push({name:"本地存储",status:"fail",description:"本地存储不可用",recommendation:"检查浏览器设置，确保允许本地存储"})}Notification.permission==="granted"?(g.push({name:"通知权限",status:"pass",description:"通知权限已授权"}),d++):Notification.permission==="denied"?g.push({name:"通知权限",status:"fail",description:"通知权限被拒绝",recommendation:"在浏览器设置中重新允许通知权限"}):g.push({name:"通知权限",status:"warning",description:"通知权限未设置",recommendation:"建议授权通知权限以获得更好的用户体验"}),navigator.onLine?(g.push({name:"网络连接",status:"pass",description:"网络连接正常"}),d++):g.push({name:"网络连接",status:"fail",description:"网络连接异常",recommendation:"检查网络设置和连接状态"}),window.localStorage&&window.JSON&&window.Promise?(g.push({name:"浏览器兼容性",status:"pass",description:"浏览器完全兼容"}),d++):g.push({name:"浏览器兼容性",status:"warning",description:"浏览器兼容性有限",recommendation:"建议使用最新版本的现代浏览器"});const h=xt();h.memoryUsage<80?(g.push({name:"内存使用",status:"pass",description:`内存使用率 ${h.memoryUsage}%，运行良好`}),d++):g.push({name:"内存使用",status:"warning",description:`内存使用率 ${h.memoryUsage}%，较高`,recommendation:"关闭不必要的标签页和应用程序"});try{const V=JSON.parse(localStorage.getItem("system_settings")||"{}");Object.keys(V).length>0?(g.push({name:"数据完整性",status:"pass",description:"用户数据和设置完整"}),d++):g.push({name:"数据完整性",status:"warning",description:"部分数据可能丢失",recommendation:"重新配置系统设置"})}catch{g.push({name:"数据完整性",status:"fail",description:"数据损坏或不可读",recommendation:"清除浏览器数据并重新设置"})}const w=Math.round(d/g.length*100);return{overall:w>=80?"healthy":"warning",healthPercentage:w,summary:`系统健康度 ${w}%，${d}/${g.length} 项检查通过`,checks:g,timestamp:new Date().toISOString()}},ko=async()=>{const g=[],d=Co();d>0&&g.push(`清理了 ${d} 条过期数据`);const i=yt();Vo();const h=yt(),w=i-h;if(w>0&&g.push(`压缩存储节省了 ${w}KB 空间`),"caches"in window)try{const k=await caches.keys();for(const V of k)await caches.delete(V);g.push("清理了浏览器缓存")}catch(k){console.error("清理缓存失败:",k)}return{success:!0,optimizations:g,message:g.length>0?`系统优化完成：${g.join("，")}`:"系统已处于最佳状态"}},Co=()=>{let g=0;const d=Object.keys(localStorage);for(const i of d)if(i.includes("temp_")||i.includes("cache_"))try{const h=JSON.parse(localStorage.getItem(i));h.expiry&&Date.now()>h.expiry&&(localStorage.removeItem(i),g++)}catch{localStorage.removeItem(i),g++}return g},yt=()=>{let g=0;for(let d in localStorage)localStorage.hasOwnProperty(d)&&(g+=localStorage[d].length+d.length);return Math.round(g/1024)},Vo=()=>{const g=Object.keys(localStorage);for(const d of g)try{const i=localStorage.getItem(d);if(i&&i.includes("  ")){const h=JSON.stringify(JSON.parse(i));localStorage.setItem(d,h)}}catch{}},Ao=g=>{const d=Date.now()-g,i=Math.floor(d/(1e3*60*60*24)),h=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),w=Math.floor(d%(1e3*60*60)/(1e3*60));return i>0?`${i}天 ${h}小时`:h>0?`${h}小时 ${w}分钟`:`${w}分钟`},To={class:"settings-page"},Io={class:"header-content"},Do={class:"header-left"},Uo={key:0,class:"setting-section"},$o={class:"color-picker-group"},Lo={key:1,class:"setting-section"},Eo={key:0,class:"email-config"},Po={class:"duration-preview"},No={class:"action-buttons"},zo={class:"setting-hint"},Ro={class:"action-buttons"},Mo={key:2,class:"setting-section"},Oo={class:"setting-hint"},Bo={key:0,class:"timer-info"},Fo={class:"action-buttons"},Yo={class:"action-buttons"},jo={key:3,class:"setting-section"},Wo={class:"section-header"},Jo={class:"setting-hint"},qo={class:"setting-hint"},Ko={class:"setting-hint"},Go={class:"setting-hint"},Xo={key:0,class:"timer-info"},Zo={class:"setting-hint"},Qo={class:"performance-stats"},ea={class:"performance-item"},ta={class:"performance-bar"},sa={class:"performance-value"},na={class:"performance-item"},oa={class:"performance-value"},aa={class:"action-buttons"},la={key:4,class:"setting-section"},ia={class:"data-stats"},ra={class:"data-actions"},ua={class:"action-group"},da={class:"action-group"},fa={class:"action-group danger-zone"},ca={key:11,class:"setting-section"},ma={class:"system-info"},pa={class:"info-card"},ga={class:"info-icon"},_a={class:"info-content"},Ha={class:"version-info"},va={class:"version"},ha={class:"build"},ya={class:"env"},xa={class:"system-stats"},wa={class:"stat-item"},Sa={class:"stat-content"},ba={class:"stat-value"},ka={class:"stat-item"},Ca={class:"stat-icon uptime"},Va={class:"stat-content"},Aa={class:"stat-value"},Ta={class:"stat-item"},Ia={class:"stat-icon users"},Da={class:"stat-content"},Ua={class:"stat-value"},$a={class:"system-details"},La={class:"details-grid"},Ea={class:"detail-item"},Pa={class:"detail-value"},Na={class:"detail-item"},za={class:"detail-value"},Ra={class:"detail-item"},Ma={class:"detail-value"},Oa={class:"detail-item"},Ba={class:"detail-value"},Fa={class:"detail-item"},Ya={class:"detail-value"},ja={class:"detail-item"},Wa={class:"detail-value"},Ja={class:"feature-list"},qa={class:"feature-grid"},Ka={class:"tech-stack"},Ga={class:"tech-tags"},Xa={class:"diagnostic-tools"},Za={class:"diagnostic-grid"},Qa={class:"contact-info"},el={class:"contact-buttons"},tl={key:12,class:"settings-actions"},sl={class:"action-buttons"},nl={class:"password-strength"},ol={class:"strength-bar"},al={class:"strength-text"},ll={class:"access-logs-container"},il={class:"logs-header"},rl={class:"logs-stats"},ul={class:"logs-actions"},dl={class:"notification-history-container"},fl={class:"history-stats"},cl={class:"history-filters"},ml={class:"notification-list"},pl=["onClick"],gl={class:"notification-icon"},_l={class:"notification-content"},Hl={class:"notification-title"},vl={class:"notification-body"},hl={class:"notification-time"},yl={class:"notification-actions"},xl={key:0,class:"empty-state"},wl={class:"diagnostic-container"},Sl={key:0},bl={class:"diagnostic-summary"},kl={class:"summary-stats"},Cl={class:"summary-icon"},Vl={class:"summary-text"},Al={class:"summary-title"},Tl={class:"summary-desc"},Il={class:"diagnostic-details"},Dl={class:"check-list"},Ul={class:"check-icon"},$l={class:"check-content"},Ll={class:"check-name"},El={class:"check-description"},Pl={key:0,class:"check-recommendation"},Nl={__name:"Settings",setup(g){const d=P("appearance"),i=ye(),h=P(!1),w=P(ft()),k=P(!1),V=P(!1),R=P(!1),B=P(!1),$=P(!1),p=P(!1),b=P([]),A=P(!1),x=P([]),O=P("all"),F=P(!1),j=P(null),C=te({memoryUsage:0,responseTime:0,cpuUsage:0}),r=i.settings,N=P(),D=te({currentPassword:"",newPassword:"",confirmPassword:""}),H=te({twoFactorAuth:!1,loginNotification:!0,ipWhitelist:!1,sessionTimeout:30}),v=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399","#722ED1","#EB2F96","#13C2C2"],Z=te({theme:!1,color:!1,fontSize:!1,compact:!1,animations:!1}),se=te({emailAddress:localStorage.getItem("notification_email")||"",soundEnabled:!1,lastNotificationTime:null});let Q=null;const Y=te({timer:null,remaining:0,interval:null}),J=te({timer:null,remaining:0,interval:null}),xe=te({enabled:!1,pendingAction:null}),X={currentPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:8,message:"密码至少需要8位字符",trigger:"blur"},{validator:(o,e,f)=>{/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e)?f():f(new Error("密码必须包含大小写字母和数字"))},trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(o,e,f)=>{e!==D.newPassword?f(new Error("两次输入的密码不一致")):f()},trigger:"blur"}]},fe=pe(()=>{const o=D.newPassword;if(!o)return 0;let e=0;return o.length>=8&&(e+=1),o.length>=12&&(e+=1),/[a-z]/.test(o)&&(e+=1),/[A-Z]/.test(o)&&(e+=1),/\d/.test(o)&&(e+=1),/[^a-zA-Z\d]/.test(o)&&(e+=1),Math.min(e,4)}),ae=pe(()=>["","弱","一般","强","很强"][fe.value]||""),q=pe(()=>["","weak","fair","good","strong"][fe.value]||""),Ce=pe(()=>fe.value/4*100+"%"),Ve=pe(()=>window.innerWidth<=768),He=()=>{window.innerWidth>768&&(h.value=!1)},we=o=>{if(o.ctrlKey&&o.key==="s"){o.preventDefault(),tt();return}if(o.ctrlKey&&o.key==="r"){o.preventDefault(),et();return}o.key==="Escape"&&(k.value&&(k.value=!1),V.value&&(V.value=!1),h.value&&(h.value=!1))};Ee(()=>{window.addEventListener("resize",He),document.addEventListener("keydown",we),st(),ce(),i.applyAppearance(),r.privacy.autoLogout!=="never"&&Te(),r.system.autoRefresh&&Ne();const o=()=>Pe();document.addEventListener("click",o),document.addEventListener("keypress",o),document.addEventListener("mousemove",o)}),Ks(()=>{window.removeEventListener("resize",He),document.removeEventListener("keydown",we),Y.timer&&clearTimeout(Y.timer),Y.interval&&clearInterval(Y.interval),J.timer&&clearTimeout(J.timer),J.interval&&clearInterval(J.interval),window.performanceUpdateInterval&&clearInterval(window.performanceUpdateInterval);const o=()=>Pe();document.removeEventListener("click",o),document.removeEventListener("keypress",o),document.removeEventListener("mousemove",o)});const ue=te({cacheSize:0,userData:0,logCount:0}),K=te({version:"1.2.0",build:"20241206",environment:"production",uptime:Date.now(),activeUsers:1,health:{overall:95,database:98,cache:92,network:97},os:navigator.platform,browser:E(),screenResolution:`${screen.width}x${screen.height}`,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,userAgent:navigator.userAgent.substring(0,100)+"...",features:[{name:"卡密批量生成",status:"active"},{name:"多种支付方式",status:"active"},{name:"用户权限管理",status:"active"},{name:"数据统计分析",status:"active"},{name:"安全加密审计",status:"active"},{name:"响应式界面",status:"active"},{name:"实时通知",status:"active"},{name:"自动备份",status:"inactive"}],techStack:[{name:"Vue",version:"3.4.0"},{name:"Element Plus",version:"2.4.0"},{name:"Pinia",version:"2.1.0"},{name:"Vite",version:"5.0.0"},{name:"TypeScript",version:"5.0.0"}]});function E(){const o=navigator.userAgent;return o.includes("Chrome")?"Chrome":o.includes("Firefox")?"Firefox":o.includes("Safari")?"Safari":o.includes("Edge")?"Edge":"Unknown"}const Ae=o=>{d.value=o,Ve.value&&(h.value=!1)},wt=async o=>{try{Z.theme=!0,await new Promise(e=>setTimeout(e,200)),i.applyTheme(o),u.success("主题已更改")}catch(e){console.error("应用主题失败:",e),u.error("主题切换失败，请重试")}finally{Z.theme=!1}},je=async o=>{try{if(!o||!/^#[0-9A-F]{6}$/i.test(o)){u.warning("请选择有效的颜色");return}Z.color=!0,await new Promise(e=>setTimeout(e,100)),i.applyPrimaryColor(o),u.success("主题色已更新")}catch(e){console.error("应用主题色失败:",e),u.error("主题色更新失败，请重试")}finally{Z.color=!1}},St=()=>{const o="#409EFF";r.appearance.primaryColor=o,je(o)},bt=async o=>{try{if(o<12||o>18){u.warning("字体大小必须在12-18px之间");return}i.applyFontSize(o),u.success("字体大小已调整")}catch(e){console.error("应用字体大小失败:",e),u.error("字体大小调整失败，请重试")}},kt=async o=>{try{i.applyCompactMode(o),u.success(o?"已启用紧凑模式":"已关闭紧凑模式")}catch(e){console.error("应用紧凑模式失败:",e),u.error("紧凑模式设置失败，请重试")}},Ct=async o=>{try{i.applyAnimations(o),u.success(o?"已启用动画效果":"已关闭动画效果")}catch(e){console.error("应用动画设置失败:",e),u.error("动画设置失败，请重试")}},Vt=async o=>{o&&Notification.permission==="default"?await Notification.requestPermission()!=="granted"?(r.notification.desktop=!1,u.warning("通知权限被拒绝")):(u.success("通知权限已授权"),i.updateNotificationSetting("desktop",!0)):o&&Notification.permission==="granted"?i.updateNotificationSetting("desktop",!0):i.updateNotificationSetting("desktop",!1)},We=(o,e)=>{i.updateNotificationSetting(o,e),o==="sound"&&e&&qe(),u.success("通知设置已更新")},At=o=>{i.updateNotificationSetting("types",o),u.success("通知类型已更新")},Je=()=>{i.saveSettings(),u.success("免打扰时间已更新")},Tt=()=>{if(se.emailAddress){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se.emailAddress)){u.error("请输入有效的邮箱地址");return}localStorage.setItem("notification_email",se.emailAddress),u.success("邮箱地址已保存")}},qe=()=>{Q||(Q=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbIqJdJSPfJObhJSXfJiMgYyIeH6AfH58fHp8fHp8fHp8fHx6fHx6fHx6fHx6fHh6fHx6fHx6fHx6eHp8fHh6fHx6fHx6fHh6fHh6fHx6fHx6fHx6eHp8eHp8fHh6fHx6eHh6fHh6fHx6fHx6fHx6eHp8eHh6fHh6fHh6fHx6eHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHp6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx8eHp8fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHp8fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHx6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6fHh6"))},It=()=>{if(!r.notification.desktop){u.warning("请先启用桌面通知");return}if(Notification.permission!=="granted"){u.error("通知权限未授权");return}if(Ke()){u.info("当前在免打扰时间内");return}new Notification("测试通知",{body:"这是一条测试通知消息",icon:"/favicon.ico",tag:"test-notification"}),u.success("测试通知已发送")},Dt=()=>{if(!r.notification.sound){u.warning("请先启用声音提示");return}if(Ke()){u.info("当前在免打扰时间内");return}Q||qe(),Q&&(Q.play().catch(o=>{console.error("播放通知声音失败:",o),u.error("播放通知声音失败")}),u.success("测试声音已播放"))},Ke=()=>{const o=new Date,e=o.getHours()*60+o.getMinutes();if(!r.notification.quietStart||!r.notification.quietEnd)return!1;const[f,S]=r.notification.quietStart.split(":").map(Number),[I,L]=r.notification.quietEnd.split(":").map(Number),me=f*60+S,ve=I*60+L;return me<=ve?e>=me&&e<=ve:e>=me||e<=ve},Ut=o=>{i.updatePrivacySetting("autoLogout",o),Te(),u.success("自动登出设置已更新")},Te=()=>{Y.timer&&clearTimeout(Y.timer),Y.interval&&clearInterval(Y.interval);const o=r.privacy.autoLogout;if(o==="never"){Y.remaining=0;return}const f=parseInt(o)*60*1e3;Y.remaining=f,Y.interval=setInterval(()=>{Y.remaining-=1e3,Y.remaining<=0&&Ge()},1e3),Y.timer=setTimeout(()=>{Ge()},f)},Pe=()=>{r.privacy.autoLogout!=="never"&&Te()},Ge=()=>{u.warning("长时间未操作，即将自动登出"),setTimeout(()=>{localStorage.removeItem("user_token"),localStorage.removeItem("user_info"),window.$router?window.$router.push("/login"):window.location.href="/login"},3e3)},$t=o=>{const e=Math.floor(o/6e4),f=Math.floor(o%6e4/1e3);return`${e}:${f.toString().padStart(2,"0")}`},Lt=o=>{i.updatePrivacySetting("rememberLogin",o),o?localStorage.getItem("user_token")&&localStorage.setItem("user_token_remember","true"):localStorage.removeItem("user_token_remember"),u.success("记住登录设置已更新")},Et=o=>{i.updatePrivacySetting("confirmActions",o),xe.enabled=o,u.success("操作确认设置已更新")},Pt=async(o,e="确定要执行此操作吗？")=>{if(!r.privacy.confirmActions)return await o();try{return await G.confirm(e,"操作确认",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await o()}catch{return u.info("操作已取消"),!1}},Nt=async o=>{try{if(o)await zt();else if(await Pt(()=>Promise.resolve(!0),"禁用数据加密将使用明文存储，确定继续吗？"))await Rt();else{r.privacy.dataEncryption=!0;return}i.updatePrivacySetting("dataEncryption",o),u.success(o?"数据加密已启用":"数据加密已禁用")}catch(e){console.error("数据加密设置失败:",e),u.error("数据加密设置失败"),r.privacy.dataEncryption=!o}},zt=async()=>{const o=await Mt();localStorage.setItem("encryption_key",o);const e=["user_info","card_data","payment_info","system_settings"];for(const f of e){const S=localStorage.getItem(f);if(S){const I=await Ot(S,o);localStorage.setItem(f,I)}}},Rt=async()=>{const o=localStorage.getItem("encryption_key");if(!o)return;const e=["user_info","card_data","payment_info","system_settings"];for(const f of e){const S=localStorage.getItem(f);if(S)try{const I=await Bt(S,o);localStorage.setItem(f,I)}catch(I){console.error(`解密 ${f} 失败:`,I)}}localStorage.removeItem("encryption_key")},Mt=async()=>{const o=new Uint8Array(32);return crypto.getRandomValues(o),Array.from(o,e=>e.toString(16).padStart(2,"0")).join("")},Ot=async(o,e)=>{const f=e.match(/.{2}/g).map(L=>parseInt(L,16)),S=new TextEncoder().encode(o),I=new Uint8Array(S.length);for(let L=0;L<S.length;L++)I[L]=S[L]^f[L%f.length];return btoa(String.fromCharCode(...I))},Bt=async(o,e)=>{const f=e.match(/.{2}/g).map(L=>parseInt(L,16)),S=new Uint8Array(atob(o).split("").map(L=>L.charCodeAt(0))),I=new Uint8Array(S.length);for(let L=0;L<S.length;L++)I[L]=S[L]^f[L%f.length];return new TextDecoder().decode(I)},Xe=async()=>{A.value=!0;try{const o=JSON.parse(localStorage.getItem("access_logs")||"[]");if(o.length===0){const e=Ft();localStorage.setItem("access_logs",JSON.stringify(e)),b.value=e}else b.value=o.sort((e,f)=>new Date(f.timestamp)-new Date(e.timestamp))}catch(o){console.error("加载访问日志失败:",o),u.error("加载访问日志失败")}finally{A.value=!1}},Ft=()=>{const o=["登录","登出","修改密码","查看卡密","生成卡密","删除卡密","修改设置"],e=["192.168.1.100","10.0.0.50","172.16.0.200","192.168.0.1"],f=["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 Chrome/91.0.4472.124","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 Safari/537.36","Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 Chrome/91.0.4472.124","Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15"],S=[],I=new Date;for(let L=0;L<50;L++){const me=new Date(I.getTime()-Math.random()*30*24*60*60*1e3);S.push({id:L+1,timestamp:me.toISOString(),ip:e[Math.floor(Math.random()*e.length)],userAgent:f[Math.floor(Math.random()*f.length)],action:o[Math.floor(Math.random()*o.length)],status:Math.random()>.1?"success":"failed"})}return S},Yt=()=>{Xe()},jt=()=>{const o=new Date().toDateString();return b.value.filter(e=>new Date(e.timestamp).toDateString()===o).length},Wt=()=>{if(b.value.length===0)return"无";const o=b.value[0];return Ze(o.timestamp)},Ze=o=>new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),Jt=o=>o.includes("iPhone")?"iPhone":o.includes("Android")?"Android":o.includes("Mac OS X")?"macOS":o.includes("Windows NT")?"Windows":o.includes("Linux")?"Linux":"未知设备",qt=o=>({登录:"success",登出:"info",修改密码:"warning",查看卡密:"",生成卡密:"success",删除卡密:"danger",修改设置:"warning"})[o]||"",Kt=()=>{R.value=!0,Xe()},Qe=async()=>{try{await G.confirm("确定要清除所有访问日志吗？","确认操作",{type:"warning"}),u.success("访问日志已清除")}catch{}},Gt=async()=>{try{const o={settings:r,userData:JSON.parse(localStorage.getItem("user_data")||"{}"),timestamp:new Date().toISOString(),version:"1.0.0"},e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),f=URL.createObjectURL(e),S=document.createElement("a");S.href=f,S.download=`data_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(f),u.success("数据导出成功")}catch(o){console.error("导出数据失败:",o),u.error("数据导出失败，请重试")}},Xt=async()=>{try{const o={settings:r,timestamp:new Date().toISOString(),version:"1.0.0"},e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),f=URL.createObjectURL(e),S=document.createElement("a");S.href=f,S.download=`settings_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(f),u.success("设置导出成功")}catch(o){console.error("导出设置失败:",o),u.error("设置导出失败，请重试")}},Zt=o=>{if(!o)return u.warning("请选择要导入的文件"),!1;if(!o.name.endsWith(".json"))return u.error("请选择JSON格式的备份文件"),!1;const e=new FileReader;return e.onload=f=>{try{const S=JSON.parse(f.target.result);if(!S.settings){u.error("无效的备份文件：缺少设置数据");return}const I=i.validateSettings(S.settings);if(I.length>0){u.error(`导入失败：${I.join(", ")}`);return}i.importSettings(S)?(u.success("数据导入成功"),ce()):u.error("数据导入失败")}catch(S){console.error("导入数据失败:",S),u.error("文件解析失败，请检查文件格式")}},e.onerror=()=>{u.error("文件读取失败")},e.readAsText(o),!1},Qt=async()=>{try{await G.confirm("确定要清除所有缓存吗？","确认操作",{type:"warning"}),u.success("缓存已清除"),ce()}catch{}},es=async()=>{try{await G.confirm("确定要重置所有设置为默认值吗？","确认操作",{type:"warning"}),localStorage.removeItem("system_settings"),location.reload()}catch{}},ts=async()=>{try{await G.confirm("这将清除所有本地数据，包括用户信息、卡密数据等，此操作不可恢复！","危险操作",{type:"error",confirmButtonText:"确认清除",cancelButtonText:"取消"}),localStorage.clear(),u.success("所有数据已清除，页面即将刷新"),setTimeout(()=>location.reload(),1e3)}catch{}},ss=async()=>{try{u.loading("正在检查更新...");const o=await vo();o.hasUpdate?G.alert(`发现新版本 ${o.latestVersion}！

更新内容：
${o.updateInfo.changelog.join(`
`)}`,"发现更新",{confirmButtonText:"立即更新",type:"success"}).then(()=>{u.info("更新功能开发中...")}):u.success("已是最新版本")}catch{u.error("检查更新失败")}},ns=()=>{const o=ho();G.alert(o.map(e=>`• ${e.title}: ${e.description}`).join(`
`),"帮助文档",{confirmButtonText:"我知道了",type:"info"})},os=async()=>{try{const{value:o}=await G.prompt("请描述您遇到的问题：","问题反馈",{confirmButtonText:"提交",cancelButtonText:"取消",inputType:"textarea",inputPlaceholder:"详细描述问题的发生步骤、错误信息等..."});if(o){const e=await yo({description:o,category:"bug",severity:"medium"});e.success&&u.success(`${e.message}，报告编号：${e.reportId}`)}}catch(o){o!=="cancel"&&u.error("提交反馈失败")}},as=async()=>{try{if(!await N.value.validate())return;p.value=!0,await new Promise(e=>setTimeout(e,1e3)),u.success("密码修改成功，请重新登录"),k.value=!1,D.currentPassword="",D.newPassword="",D.confirmPassword="",N.value.resetFields()}catch(o){console.error("修改密码失败:",o),u.error("密码修改失败，请重试")}finally{p.value=!1}},Ie=async(o,e)=>{try{H[o]=e,u.success("安全设置已更新")}catch(f){console.error("更新安全设置失败:",f),u.error("安全设置更新失败"),H[o]=!e}},et=async()=>{try{await G.confirm("确定要重置当前部分的设置吗？","确认操作",{type:"warning"}),i.resetSection(d.value)?u.success("设置已重置"):u.error("重置失败，请重试")}catch(o){o!=="cancel"&&(console.error("重置设置失败:",o),u.error("重置失败，请重试"))}},tt=async()=>{try{i.saveSettings()?u.success("设置已保存"):u.error("保存失败，请检查浏览器存储权限")}catch(o){console.error("保存设置失败:",o),u.error("保存失败，请重试")}},st=async()=>{try{i.loadSettings()}catch(o){console.error("加载设置失败:",o),u.warning("加载设置失败，将使用默认设置")}},ce=async()=>{try{const o={cacheSize:Ho(),userData:ht("all_users"),logCount:ht("access_logs")};Object.assign(ue,o)}catch(o){console.error("加载数据统计失败:",o),Object.assign(ue,{cacheSize:0,userData:0,logCount:0})}},ls=o=>{try{i.updateSystemSetting("language",o),un(o),w.value=o,u.success(vt("settings.messages.languageUpdated")),u.info({message:vt("settings.messages.languageWillReload"),duration:3e3}),setTimeout(()=>{window.location.reload()},3e3)}catch(e){console.error("语言切换失败:",e),u.error("语言切换失败，请重试")}},is=o=>{i.updateSystemSetting("timezone",o),u.success("时区设置已更新")},rs=o=>{i.updateSystemSetting("dateFormat",o),u.success("日期格式已更新")},us=o=>{i.updateSystemSetting("numberFormat",o),u.success("数字格式已更新")},ds=o=>{i.updateSystemSetting("pageSize",o),u.success("页面大小已更新")},fs=o=>{i.updateSystemSetting("autoRefresh",o),o?Ne():nt(),u.success(o?"自动刷新已启用":"自动刷新已关闭")},Ne=()=>{nt();const o=30*1e3;J.remaining=o,J.interval=setInterval(()=>{J.remaining-=1e3,J.remaining<=0&&(cs(),J.remaining=o)},1e3)},nt=()=>{J.timer&&clearTimeout(J.timer),J.interval&&clearInterval(J.interval),J.remaining=0},cs=()=>{ce(),window.dispatchEvent(new CustomEvent("autoRefresh"))},ot=pe(()=>O.value==="all"?x.value:x.value.filter(o=>o.type===O.value)),ms=o=>{i.updateNotificationSetting("priority",o),u.success("通知优先级已更新")},ps=o=>{i.updateNotificationSetting("duration",o),u.success("通知持续时间已更新")},gs=o=>{i.updateNotificationSetting("rateLimit",o),u.success(o?"通知频率限制已启用":"通知频率限制已关闭")},_s=()=>{B.value=!0,at()},at=()=>{x.value=xo()},lt=async()=>{try{await G.confirm("确定要清空所有通知历史吗？","确认操作",{type:"warning"}),localStorage.removeItem("notification_history"),x.value=[],u.success("通知历史已清空")}catch{}},Hs=()=>{const o=new Date().toDateString();return x.value.filter(e=>new Date(e.timestamp).toDateString()===o).length},vs=()=>x.value.filter(o=>!o.read).length,hs=o=>{o.read=!0;const e=JSON.parse(localStorage.getItem("notification_history")||"[]"),f=e.findIndex(S=>S.id===o.id);f!==-1&&(e[f].read=!0,localStorage.setItem("notification_history",JSON.stringify(e)))},ys=()=>{x.value.forEach(o=>o.read=!0),localStorage.setItem("notification_history",JSON.stringify(x.value)),u.success("所有通知已标记为已读")},xs=o=>{const e=x.value.findIndex(f=>f.id===o.id);e!==-1&&(x.value.splice(e,1),localStorage.setItem("notification_history",JSON.stringify(x.value)))},ws=o=>new Date(o).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),Ss=o=>({order:"notification-order",payment:"notification-payment",security:"notification-security",system:"notification-system"})[o]||"notification-default",bs=()=>{if(!r.notification.email){u.warning("请先启用邮件通知");return}if(!se.emailAddress){u.warning("请先配置邮箱地址");return}u.success("测试邮件已发送（模拟）")},ks=o=>{i.updateSystemSetting("cacheStrategy",o),u.success("缓存策略已更新"),Is(o)},Cs=o=>{i.updateSystemSetting("crashReporting",o),u.success(o?"错误报告已启用":"错误报告已禁用")},Vs=o=>{i.updateSystemSetting("analytics",o),u.success(o?"使用统计已启用":"使用统计已禁用")},As=o=>{i.updateSystemSetting("debugMode",o),o?(console.log("调试模式已启用"),window.DEBUG_MODE=!0):window.DEBUG_MODE=!1,u.success(o?"调试模式已启用":"调试模式已禁用")},Ts=o=>{i.updateSystemSetting("preload",o),u.success(o?"预加载已启用":"预加载已禁用")},Is=o=>{const f={aggressive:{maxAge:864e5,maxSize:52428800},standard:{maxAge:216e5,maxSize:20971520},minimal:{maxAge:36e5,maxSize:5242880},none:{maxAge:0,maxSize:0}}[o];f&&(window.CACHE_CONFIG=f)},ze=()=>{Object.assign(C,xt())},Ds=async()=>{try{u.loading("正在运行性能测试...");const o=await So(),e=`性能测试完成！
总耗时: ${o.totalDuration}ms
`+o.tests.map(f=>`${f.name}: ${f.duration}ms (${f.status==="good"?"良好":"需优化"})`).join(`
`);G.alert(e,"性能测试结果",{confirmButtonText:"确定",type:o.tests.every(f=>f.status==="good")?"success":"warning"})}catch{u.error("性能测试失败")}},Us=async()=>{try{u.loading("正在优化系统...");const o=await ko();o.success?(u.success(o.message),ce(),ze()):u.warning("系统优化完成，但未发现需要优化的项目")}catch{u.error("系统优化失败")}},$s=o=>o>=90?"healthy":o>=70?"warning":"danger",Ls=async()=>{$.value=!0,F.value=!0;try{j.value=await bo()}catch{u.error("系统诊断失败")}finally{F.value=!1}},Es=()=>{const o={...K,performance:C,settings:r,timestamp:new Date().toISOString()},e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),f=URL.createObjectURL(e),S=document.createElement("a");S.href=f,S.download=`system_info_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(f),u.success("系统信息已导出")},Ps=async()=>{try{if(await G.confirm("确定要清理系统缓存吗？","确认操作",{type:"warning"}),localStorage.removeItem("cache_data"),sessionStorage.clear(),"caches"in window){const o=await caches.keys();await Promise.all(o.map(e=>caches.delete(e)))}u.success("系统缓存已清理"),ce()}catch(o){o!=="cancel"&&u.error("清理缓存失败")}},Ns=async()=>{try{await G.confirm("重启应用将刷新页面，未保存的数据可能丢失","确认重启",{type:"warning",confirmButtonText:"确认重启",cancelButtonText:"取消"}),u.success("正在重启应用..."),setTimeout(()=>{window.location.reload()},1e3)}catch{}},zs=()=>{G.alert(`
MIT License

Copyright (c) 2024 卡密管理系统

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
  `,"软件许可证",{confirmButtonText:"我知道了"})},Rs=()=>{if(!j.value)return;const o={...j.value,systemInfo:K,performance:C,exportTime:new Date().toISOString()},e=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),f=URL.createObjectURL(e),S=document.createElement("a");S.href=f,S.download=`diagnostic_report_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(f),u.success("诊断报告已导出")};return Ee(()=>{window.addEventListener("resize",He),document.addEventListener("keydown",we);const o=r.system.language||"zh-CN";Gs(o),w.value=ft(),st(),ce(),ze(),at(),i.applyAppearance(),r.privacy.autoLogout!=="never"&&Te(),r.system.autoRefresh&&Ne();const e=()=>Pe();document.addEventListener("click",e),document.addEventListener("keypress",e),document.addEventListener("mousemove",e);const f=setInterval(()=>{ze()},5e3);window.performanceUpdateInterval=f}),(o,e)=>{const f=m("el-button"),S=m("el-header"),I=m("el-icon"),L=m("el-menu-item"),me=m("el-menu"),ve=m("el-card"),de=m("el-col"),ne=m("el-radio"),De=m("el-radio-group"),T=m("el-form-item"),Ms=m("el-color-picker"),it=m("el-slider"),ee=m("el-switch"),he=m("el-form"),Ue=m("el-input"),$e=m("el-checkbox"),Os=m("el-checkbox-group"),rt=m("el-time-picker"),W=m("el-option"),Se=m("el-select"),ut=m("el-input-number"),le=m("el-statistic"),Re=m("el-row"),oe=m("el-divider"),Bs=m("el-upload"),Me=m("el-tag"),Fs=m("el-main"),Ys=m("el-container"),be=m("el-dialog"),ke=m("el-table-column"),js=m("el-tooltip"),Ws=m("el-table"),Js=m("el-empty"),dt=Xs("loading");return y(),U("div",To,[t(Ys,null,{default:s(()=>[t(S,null,{default:s(()=>[n("div",Io,[n("div",Do,[n("h2",null,_(o.$t("settings.title")),1),t(f,{class:"mobile-menu-btn hidden-md-and-up",onClick:e[0]||(e[0]=l=>h.value=!h.value),icon:h.value?"Close":"Menu"},{default:s(()=>[c(_(h.value?"收起菜单":"展开菜单"),1)]),_:1},8,["icon"])]),t(f,{onClick:e[1]||(e[1]=l=>o.$router.go(-1))},{default:s(()=>e[58]||(e[58]=[c("返回",-1)])),_:1,__:[58]})])]),_:1}),t(Fs,null,{default:s(()=>[t(Re,{gutter:20,class:"settings-row"},{default:s(()=>[t(de,{xl:6,lg:7,md:8,sm:24,xs:24},{default:s(()=>[t(ve,{class:ie(["settings-menu",{"mobile-menu-open":h.value}])},{default:s(()=>[t(me,{"default-active":d.value,onSelect:Ae,class:"settings-nav",mode:Ve.value?"horizontal":"vertical"},{default:s(()=>[t(L,{index:"appearance"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(Zs))]),_:1}),n("span",null,_(o.$t("settings.menu.appearance")),1)]),_:1}),t(L,{index:"notification"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(ct))]),_:1}),n("span",null,_(o.$t("settings.menu.notification")),1)]),_:1}),t(L,{index:"privacy"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(Oe))]),_:1}),n("span",null,_(o.$t("settings.menu.privacy")),1)]),_:1}),t(L,{index:"system"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(Qs))]),_:1}),n("span",null,_(o.$t("settings.menu.system")),1)]),_:1}),t(L,{index:"data"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(mt))]),_:1}),n("span",null,_(o.$t("settings.menu.data")),1)]),_:1}),t(L,{index:"payment"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(pt))]),_:1}),e[59]||(e[59]=n("span",null,"支付设置",-1))]),_:1,__:[59]}),t(L,{index:"email"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(en))]),_:1}),e[60]||(e[60]=n("span",null,"邮件服务",-1))]),_:1,__:[60]}),t(L,{index:"security"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(Oe))]),_:1}),e[61]||(e[61]=n("span",null,"安全中心",-1))]),_:1,__:[61]}),t(L,{index:"api"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(tn))]),_:1}),e[62]||(e[62]=n("span",null,"API管理",-1))]),_:1,__:[62]}),t(L,{index:"logs"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(mt))]),_:1}),e[63]||(e[63]=n("span",null,"系统日志",-1))]),_:1,__:[63]}),t(L,{index:"backup"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(sn))]),_:1}),e[64]||(e[64]=n("span",null,"备份恢复",-1))]),_:1,__:[64]}),t(L,{index:"about"},{default:s(()=>[t(I,null,{default:s(()=>[t(a(gt))]),_:1}),n("span",null,_(o.$t("settings.menu.about")),1)]),_:1})]),_:1},8,["default-active","mode"])]),_:1},8,["class"])]),_:1}),t(de,{xl:18,lg:17,md:16,sm:24,xs:24},{default:s(()=>[t(ve,{class:"settings-content"},{default:s(()=>[d.value==="appearance"?(y(),U("div",Uo,[e[72]||(e[72]=n("div",{class:"section-header"},[n("h3",null,"外观设置"),n("p",null,"个性化您的界面体验")],-1)),t(he,{model:a(r).appearance,"label-width":"120px"},{default:s(()=>[t(T,{label:"主题模式"},{default:s(()=>[t(De,{modelValue:a(r).appearance.theme,"onUpdate:modelValue":e[2]||(e[2]=l=>a(r).appearance.theme=l),onChange:wt},{default:s(()=>[t(ne,{label:"light"},{default:s(()=>e[65]||(e[65]=[c("浅色主题",-1)])),_:1,__:[65]}),t(ne,{label:"dark"},{default:s(()=>e[66]||(e[66]=[c("深色主题",-1)])),_:1,__:[66]}),t(ne,{label:"auto"},{default:s(()=>e[67]||(e[67]=[c("跟随系统",-1)])),_:1,__:[67]})]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"主题色彩"},{default:s(()=>[n("div",$o,[t(Ms,{modelValue:a(r).appearance.primaryColor,"onUpdate:modelValue":e[3]||(e[3]=l=>a(r).appearance.primaryColor=l),onChange:je,"show-alpha":"",predefine:v},null,8,["modelValue"]),e[69]||(e[69]=n("span",{class:"color-label"},"主色调",-1)),t(f,{size:"small",onClick:St,class:"reset-color-btn"},{default:s(()=>e[68]||(e[68]=[c(" 重置 ",-1)])),_:1,__:[68]})])]),_:1}),t(T,{label:"字体大小"},{default:s(()=>[t(it,{modelValue:a(r).appearance.fontSize,"onUpdate:modelValue":e[4]||(e[4]=l=>a(r).appearance.fontSize=l),min:12,max:18,step:1,"show-stops":"",onChange:bt},null,8,["modelValue"]),n("span",{class:"font-size-preview",style:Be({fontSize:a(r).appearance.fontSize+"px"})}," 预览文字效果 ",4)]),_:1}),t(T,{label:"紧凑模式"},{default:s(()=>[t(ee,{modelValue:a(r).appearance.compact,"onUpdate:modelValue":e[5]||(e[5]=l=>a(r).appearance.compact=l),onChange:kt,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[70]||(e[70]=n("div",{class:"setting-hint"},"减少界面元素间距，显示更多内容",-1))]),_:1,__:[70]}),t(T,{label:"动画效果"},{default:s(()=>[t(ee,{modelValue:a(r).appearance.animations,"onUpdate:modelValue":e[6]||(e[6]=l=>a(r).appearance.animations=l),onChange:Ct,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[71]||(e[71]=n("div",{class:"setting-hint"},"启用页面切换和交互动画",-1))]),_:1,__:[71]})]),_:1},8,["model"])])):z("",!0),d.value==="notification"?(y(),U("div",Lo,[e[92]||(e[92]=n("div",{class:"section-header"},[n("h3",null,"通知设置"),n("p",null,"管理系统通知和提醒")],-1)),t(he,{model:a(r).notification,"label-width":"120px"},{default:s(()=>[t(T,{label:"桌面通知"},{default:s(()=>[t(ee,{modelValue:a(r).notification.desktop,"onUpdate:modelValue":e[7]||(e[7]=l=>a(r).notification.desktop=l),onChange:Vt,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[73]||(e[73]=n("div",{class:"setting-hint"},"允许系统发送桌面通知",-1))]),_:1,__:[73]}),t(T,{label:"声音提示"},{default:s(()=>[t(ee,{modelValue:a(r).notification.sound,"onUpdate:modelValue":e[8]||(e[8]=l=>a(r).notification.sound=l),onChange:e[9]||(e[9]=l=>We("sound",l)),"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[74]||(e[74]=n("div",{class:"setting-hint"},"播放通知提示音",-1))]),_:1,__:[74]}),t(T,{label:"邮件通知"},{default:s(()=>[t(ee,{modelValue:a(r).notification.email,"onUpdate:modelValue":e[10]||(e[10]=l=>a(r).notification.email=l),onChange:e[11]||(e[11]=l=>We("email",l)),"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[75]||(e[75]=n("div",{class:"setting-hint"},"重要事件通过邮件通知",-1)),a(r).notification.email?(y(),U("div",Eo,[t(Ue,{modelValue:se.emailAddress,"onUpdate:modelValue":e[12]||(e[12]=l=>se.emailAddress=l),placeholder:"请输入邮箱地址",size:"small",style:{"margin-top":"8px"},onBlur:Tt},null,8,["modelValue"])])):z("",!0)]),_:1,__:[75]}),t(T,{label:"通知类型"},{default:s(()=>[t(Os,{modelValue:a(r).notification.types,"onUpdate:modelValue":e[13]||(e[13]=l=>a(r).notification.types=l),onChange:At},{default:s(()=>[t($e,{label:"order"},{default:s(()=>e[76]||(e[76]=[c("订单状态",-1)])),_:1,__:[76]}),t($e,{label:"payment"},{default:s(()=>e[77]||(e[77]=[c("支付提醒",-1)])),_:1,__:[77]}),t($e,{label:"security"},{default:s(()=>e[78]||(e[78]=[c("安全警告",-1)])),_:1,__:[78]}),t($e,{label:"system"},{default:s(()=>e[79]||(e[79]=[c("系统公告",-1)])),_:1,__:[79]})]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"免打扰时间"},{default:s(()=>[t(rt,{modelValue:a(r).notification.quietStart,"onUpdate:modelValue":e[14]||(e[14]=l=>a(r).notification.quietStart=l),placeholder:"开始时间",format:"HH:mm","value-format":"HH:mm",onChange:Je},null,8,["modelValue"]),e[80]||(e[80]=n("span",{style:{margin:"0 10px"}},"至",-1)),t(rt,{modelValue:a(r).notification.quietEnd,"onUpdate:modelValue":e[15]||(e[15]=l=>a(r).notification.quietEnd=l),placeholder:"结束时间",format:"HH:mm","value-format":"HH:mm",onChange:Je},null,8,["modelValue"])]),_:1,__:[80]}),t(T,{label:"通知优先级"},{default:s(()=>[t(De,{modelValue:a(r).notification.priority,"onUpdate:modelValue":e[16]||(e[16]=l=>a(r).notification.priority=l),onChange:ms},{default:s(()=>[t(ne,{label:"low"},{default:s(()=>e[81]||(e[81]=[c("低",-1)])),_:1,__:[81]}),t(ne,{label:"normal"},{default:s(()=>e[82]||(e[82]=[c("普通",-1)])),_:1,__:[82]}),t(ne,{label:"high"},{default:s(()=>e[83]||(e[83]=[c("高",-1)])),_:1,__:[83]}),t(ne,{label:"urgent"},{default:s(()=>e[84]||(e[84]=[c("紧急",-1)])),_:1,__:[84]})]),_:1},8,["modelValue"]),e[85]||(e[85]=n("div",{class:"setting-hint"},"高优先级通知会忽略免打扰时间",-1))]),_:1,__:[85]}),t(T,{label:"通知持续时间"},{default:s(()=>[t(it,{modelValue:a(r).notification.duration,"onUpdate:modelValue":e[17]||(e[17]=l=>a(r).notification.duration=l),min:3,max:30,step:1,"show-stops":"",onChange:ps},null,8,["modelValue"]),n("span",Po,_(a(r).notification.duration)+"秒后自动关闭",1)]),_:1}),t(T,{label:"通知频率限制"},{default:s(()=>[t(ee,{modelValue:a(r).notification.rateLimit,"onUpdate:modelValue":e[18]||(e[18]=l=>a(r).notification.rateLimit=l),onChange:gs,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[86]||(e[86]=n("div",{class:"setting-hint"},"每分钟最多显示3条通知，避免通知泛滥",-1))]),_:1,__:[86]}),t(T,{label:"通知历史"},{default:s(()=>[n("div",No,[t(f,{onClick:_s,size:"small"},{default:s(()=>e[87]||(e[87]=[c("查看通知历史",-1)])),_:1,__:[87]}),t(f,{onClick:lt,size:"small",type:"warning"},{default:s(()=>e[88]||(e[88]=[c("清除历史",-1)])),_:1,__:[88]})]),n("div",zo,"共 "+_(x.value.length)+" 条历史记录",1)]),_:1}),t(T,{label:"测试通知"},{default:s(()=>[n("div",Ro,[t(f,{onClick:It,size:"small"},{default:s(()=>e[89]||(e[89]=[c("测试桌面通知",-1)])),_:1,__:[89]}),t(f,{onClick:Dt,size:"small"},{default:s(()=>e[90]||(e[90]=[c("测试声音通知",-1)])),_:1,__:[90]}),t(f,{onClick:bs,size:"small"},{default:s(()=>e[91]||(e[91]=[c("测试邮件通知",-1)])),_:1,__:[91]})])]),_:1})]),_:1},8,["model"])])):z("",!0),d.value==="privacy"?(y(),U("div",Mo,[e[101]||(e[101]=n("div",{class:"section-header"},[n("h3",null,"隐私安全"),n("p",null,"保护您的账户和数据安全")],-1)),t(he,{model:a(r).privacy,"label-width":"120px"},{default:s(()=>[t(T,{label:"自动登出"},{default:s(()=>[t(Se,{modelValue:a(r).privacy.autoLogout,"onUpdate:modelValue":e[19]||(e[19]=l=>a(r).privacy.autoLogout=l),onChange:Ut},{default:s(()=>[t(W,{label:"从不",value:"never"}),t(W,{label:"30分钟",value:"30"}),t(W,{label:"1小时",value:"60"}),t(W,{label:"2小时",value:"120"}),t(W,{label:"4小时",value:"240"})]),_:1},8,["modelValue"]),n("div",Oo,[e[93]||(e[93]=c(" 无操作自动退出登录 ",-1)),Y.remaining>0?(y(),U("span",Bo," (剩余: "+_($t(Y.remaining))+") ",1)):z("",!0)])]),_:1}),t(T,{label:"记住登录"},{default:s(()=>[t(ee,{modelValue:a(r).privacy.rememberLogin,"onUpdate:modelValue":e[20]||(e[20]=l=>a(r).privacy.rememberLogin=l),onChange:Lt,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[94]||(e[94]=n("div",{class:"setting-hint"},"下次访问自动登录",-1))]),_:1,__:[94]}),t(T,{label:"操作确认"},{default:s(()=>[t(ee,{modelValue:a(r).privacy.confirmActions,"onUpdate:modelValue":e[21]||(e[21]=l=>a(r).privacy.confirmActions=l),onChange:Et,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[95]||(e[95]=n("div",{class:"setting-hint"},"重要操作需要二次确认",-1))]),_:1,__:[95]}),t(T,{label:"数据加密"},{default:s(()=>[t(ee,{modelValue:a(r).privacy.dataEncryption,"onUpdate:modelValue":e[22]||(e[22]=l=>a(r).privacy.dataEncryption=l),onChange:Nt,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[96]||(e[96]=n("div",{class:"setting-hint"},"本地数据加密存储",-1))]),_:1,__:[96]}),t(T,{label:"密码管理"},{default:s(()=>[n("div",Fo,[t(f,{type:"primary",onClick:e[23]||(e[23]=l=>k.value=!0)},{default:s(()=>e[97]||(e[97]=[c("修改密码",-1)])),_:1,__:[97]}),t(f,{onClick:e[24]||(e[24]=l=>V.value=!0)},{default:s(()=>e[98]||(e[98]=[c("安全设置",-1)])),_:1,__:[98]})])]),_:1}),t(T,{label:"访问日志"},{default:s(()=>[n("div",Yo,[t(f,{onClick:Kt},{default:s(()=>e[99]||(e[99]=[c("查看访问记录",-1)])),_:1,__:[99]}),t(f,{type:"danger",onClick:Qe},{default:s(()=>e[100]||(e[100]=[c("清除日志",-1)])),_:1,__:[100]})])]),_:1})]),_:1},8,["model"])])):z("",!0),d.value==="system"?(y(),U("div",jo,[n("div",Wo,[n("h3",null,_(o.$t("settings.system.title")),1),n("p",null,_(o.$t("settings.system.subtitle")),1)]),t(he,{model:a(r).system,"label-width":"120px"},{default:s(()=>[t(T,{label:o.$t("settings.system.language")},{default:s(()=>[t(Se,{modelValue:a(r).system.language,"onUpdate:modelValue":e[25]||(e[25]=l=>a(r).system.language=l),onChange:ls},{default:s(()=>[t(W,{label:"简体中文",value:"zh-CN"}),t(W,{label:"繁體中文",value:"zh-TW"}),t(W,{label:"English",value:"en-US"})]),_:1},8,["modelValue"]),n("div",Jo,_(o.$t("settings.system.languageCurrent"))+": "+_(a(po)(a(r).system.language)),1)]),_:1},8,["label"]),t(T,{label:"时区设置"},{default:s(()=>[t(Se,{modelValue:a(r).system.timezone,"onUpdate:modelValue":e[26]||(e[26]=l=>a(r).system.timezone=l),onChange:is},{default:s(()=>[t(W,{label:"北京时间 (UTC+8)",value:"Asia/Shanghai"}),t(W,{label:"香港时间 (UTC+8)",value:"Asia/Hong_Kong"}),t(W,{label:"东京时间 (UTC+9)",value:"Asia/Tokyo"}),t(W,{label:"纽约时间 (UTC-5)",value:"America/New_York"})]),_:1},8,["modelValue"]),n("div",qo,"当前时间: "+_(a(go)()),1)]),_:1}),t(T,{label:"日期格式"},{default:s(()=>[t(De,{modelValue:a(r).system.dateFormat,"onUpdate:modelValue":e[27]||(e[27]=l=>a(r).system.dateFormat=l),onChange:rs},{default:s(()=>[t(ne,{label:"YYYY-MM-DD"},{default:s(()=>[c(_(a(Ye)("YYYY-MM-DD")),1)]),_:1}),t(ne,{label:"MM/DD/YYYY"},{default:s(()=>[c(_(a(Ye)("MM/DD/YYYY")),1)]),_:1}),t(ne,{label:"DD/MM/YYYY"},{default:s(()=>[c(_(a(Ye)("DD/MM/YYYY")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"数字格式"},{default:s(()=>[t(De,{modelValue:a(r).system.numberFormat,"onUpdate:modelValue":e[28]||(e[28]=l=>a(r).system.numberFormat=l),onChange:us},{default:s(()=>[t(ne,{label:"1,234.56"},{default:s(()=>e[102]||(e[102]=[c("1,234.56",-1)])),_:1,__:[102]}),t(ne,{label:"1.234,56"},{default:s(()=>e[103]||(e[103]=[c("1.234,56",-1)])),_:1,__:[103]}),t(ne,{label:"1 234.56"},{default:s(()=>e[104]||(e[104]=[c("1 234.56",-1)])),_:1,__:[104]})]),_:1},8,["modelValue"]),n("div",Ko,"示例: "+_(a(_o)(1234.56)),1)]),_:1}),t(T,{label:"页面大小"},{default:s(()=>[t(ut,{modelValue:a(r).system.pageSize,"onUpdate:modelValue":e[29]||(e[29]=l=>a(r).system.pageSize=l),min:10,max:100,step:10,onChange:ds},null,8,["modelValue"]),e[105]||(e[105]=n("div",{class:"setting-hint"},"列表页默认显示条数",-1))]),_:1,__:[105]}),t(T,{label:"自动刷新"},{default:s(()=>[t(ee,{modelValue:a(r).system.autoRefresh,"onUpdate:modelValue":e[30]||(e[30]=l=>a(r).system.autoRefresh=l),onChange:fs,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),n("div",Go,[e[106]||(e[106]=c(" 数据自动刷新间隔: 30秒 ",-1)),J.remaining>0?(y(),U("span",Xo," (下次刷新: "+_(Math.ceil(J.remaining/1e3))+"秒) ",1)):z("",!0)])]),_:1}),t(T,{label:"缓存策略"},{default:s(()=>[t(Se,{modelValue:a(r).system.cacheStrategy,"onUpdate:modelValue":e[31]||(e[31]=l=>a(r).system.cacheStrategy=l),onChange:ks},{default:s(()=>[t(W,{label:"积极缓存 (性能优先)",value:"aggressive"}),t(W,{label:"标准缓存 (平衡)",value:"standard"}),t(W,{label:"最小缓存 (内存优先)",value:"minimal"}),t(W,{label:"无缓存 (总是最新)",value:"none"})]),_:1},8,["modelValue"]),n("div",Zo,"当前缓存大小: "+_(ue.cacheSize)+"KB",1)]),_:1}),t(T,{label:"错误报告"},{default:s(()=>[t(ee,{modelValue:a(r).system.crashReporting,"onUpdate:modelValue":e[32]||(e[32]=l=>a(r).system.crashReporting=l),onChange:Cs,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[107]||(e[107]=n("div",{class:"setting-hint"},"自动发送崩溃和错误报告以改进系统",-1))]),_:1,__:[107]}),t(T,{label:"使用统计"},{default:s(()=>[t(ee,{modelValue:a(r).system.analytics,"onUpdate:modelValue":e[33]||(e[33]=l=>a(r).system.analytics=l),onChange:Vs,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[108]||(e[108]=n("div",{class:"setting-hint"},"匿名收集使用数据以优化用户体验",-1))]),_:1,__:[108]}),t(T,{label:"调试模式"},{default:s(()=>[t(ee,{modelValue:a(r).system.debugMode,"onUpdate:modelValue":e[34]||(e[34]=l=>a(r).system.debugMode=l),onChange:As,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[109]||(e[109]=n("div",{class:"setting-hint"},"显示详细日志和调试信息",-1))]),_:1,__:[109]}),t(T,{label:"预加载"},{default:s(()=>[t(ee,{modelValue:a(r).system.preload,"onUpdate:modelValue":e[35]||(e[35]=l=>a(r).system.preload=l),onChange:Ts,"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[110]||(e[110]=n("div",{class:"setting-hint"},"预加载常用数据以提升响应速度",-1))]),_:1,__:[110]}),t(T,{label:"系统性能"},{default:s(()=>[n("div",Qo,[n("div",ea,[e[111]||(e[111]=n("span",{class:"performance-label"},"内存使用:",-1)),n("div",ta,[n("div",{class:"performance-fill",style:Be({width:C.memoryUsage+"%"})},null,4)]),n("span",sa,_(C.memoryUsage)+"%",1)]),n("div",na,[e[112]||(e[112]=n("span",{class:"performance-label"},"响应时间:",-1)),n("span",oa,_(C.responseTime)+"ms",1)])]),n("div",aa,[t(f,{onClick:Ds,size:"small"},{default:s(()=>e[113]||(e[113]=[c("性能测试",-1)])),_:1,__:[113]}),t(f,{onClick:Us,size:"small",type:"primary"},{default:s(()=>e[114]||(e[114]=[c("优化系统",-1)])),_:1,__:[114]})])]),_:1})]),_:1},8,["model"])])):z("",!0),d.value==="data"?(y(),U("div",la,[e[127]||(e[127]=n("div",{class:"section-header"},[n("h3",null,"数据管理"),n("p",null,"管理本地数据和缓存")],-1)),n("div",ia,[t(Re,{gutter:20},{default:s(()=>[t(de,{span:8},{default:s(()=>[t(le,{title:"缓存大小",value:ue.cacheSize,suffix:"KB"},null,8,["value"])]),_:1}),t(de,{span:8},{default:s(()=>[t(le,{title:"用户数据",value:ue.userData,suffix:"条"},null,8,["value"])]),_:1}),t(de,{span:8},{default:s(()=>[t(le,{title:"日志记录",value:ue.logCount,suffix:"条"},null,8,["value"])]),_:1})]),_:1})]),t(oe),n("div",ra,[n("div",ua,[e[117]||(e[117]=n("h4",null,"数据导出",-1)),e[118]||(e[118]=n("p",null,"导出您的个人数据和设置",-1)),t(f,{type:"primary",onClick:Gt},{default:s(()=>e[115]||(e[115]=[c("导出所有数据",-1)])),_:1,__:[115]}),t(f,{onClick:Xt},{default:s(()=>e[116]||(e[116]=[c("仅导出设置",-1)])),_:1,__:[116]})]),t(oe),n("div",da,[e[120]||(e[120]=n("h4",null,"数据导入",-1)),e[121]||(e[121]=n("p",null,"从备份文件恢复数据",-1)),t(Bs,{"before-upload":Zt,"show-file-list":!1,accept:".json"},{default:s(()=>[t(f,null,{default:s(()=>e[119]||(e[119]=[c("选择备份文件",-1)])),_:1,__:[119]})]),_:1})]),t(oe),n("div",fa,[e[125]||(e[125]=n("h4",null,"危险操作",-1)),e[126]||(e[126]=n("p",null,"以下操作不可恢复，请谨慎操作",-1)),t(f,{type:"warning",onClick:Qt},{default:s(()=>e[122]||(e[122]=[c("清除缓存",-1)])),_:1,__:[122]}),t(f,{type:"danger",onClick:es},{default:s(()=>e[123]||(e[123]=[c("重置设置",-1)])),_:1,__:[123]}),t(f,{type:"danger",onClick:ts},{default:s(()=>e[124]||(e[124]=[c("清空所有数据",-1)])),_:1,__:[124]})])])])):z("",!0),d.value==="payment"?(y(),M(yn,{key:5})):z("",!0),d.value==="email"?(y(),M(bn,{key:6})):z("",!0),d.value==="security"?(y(),M(Dn,{key:7})):z("",!0),d.value==="api"?(y(),M(Gn,{key:8})):z("",!0),d.value==="logs"?(y(),M(so,{key:9})):z("",!0),d.value==="backup"?(y(),M(mo,{key:10})):z("",!0),d.value==="about"?(y(),U("div",ca,[e[154]||(e[154]=n("div",{class:"section-header"},[n("h3",null,"关于系统"),n("p",null,"系统信息和版本详情")],-1)),n("div",ma,[n("div",pa,[n("div",ga,[t(I,{size:"48"},{default:s(()=>[t(a(nn))]),_:1})]),n("div",_a,[e[128]||(e[128]=n("h3",null,"卡密管理系统",-1)),e[129]||(e[129]=n("p",null,"专业的卡密生成、销售、管理解决方案",-1)),n("div",Ha,[n("span",va,"版本 "+_(K.version),1),n("span",ha,"构建 "+_(K.build),1),n("span",ya,_(K.environment),1)])])]),t(oe),n("div",xa,[e[133]||(e[133]=n("h4",null,"系统状态",-1)),t(Re,{gutter:20},{default:s(()=>[t(de,{span:8},{default:s(()=>[n("div",wa,[n("div",{class:ie(["stat-icon",$s(K.health.overall)])},[t(I,null,{default:s(()=>[K.health.overall>80?(y(),M(a(Le),{key:0})):(y(),M(a(Fe),{key:1}))]),_:1})],2),n("div",Sa,[n("div",ba,_(K.health.overall)+"%",1),e[130]||(e[130]=n("div",{class:"stat-label"},"系统健康度",-1))])])]),_:1}),t(de,{span:8},{default:s(()=>[n("div",ka,[n("div",Ca,[t(I,null,{default:s(()=>[t(a(on))]),_:1})]),n("div",Va,[n("div",Aa,_(a(Ao)(K.uptime)),1),e[131]||(e[131]=n("div",{class:"stat-label"},"运行时间",-1))])])]),_:1}),t(de,{span:8},{default:s(()=>[n("div",Ta,[n("div",Ia,[t(I,null,{default:s(()=>[t(a(an))]),_:1})]),n("div",Da,[n("div",Ua,_(K.activeUsers),1),e[132]||(e[132]=n("div",{class:"stat-label"},"活跃用户",-1))])])]),_:1})]),_:1})]),t(oe),n("div",$a,[e[140]||(e[140]=n("h4",null,"系统详情",-1)),n("div",La,[n("div",Ea,[e[134]||(e[134]=n("span",{class:"detail-label"},"操作系统:",-1)),n("span",Pa,_(K.os),1)]),n("div",Na,[e[135]||(e[135]=n("span",{class:"detail-label"},"浏览器:",-1)),n("span",za,_(K.browser),1)]),n("div",Ra,[e[136]||(e[136]=n("span",{class:"detail-label"},"屏幕分辨率:",-1)),n("span",Ma,_(K.screenResolution),1)]),n("div",Oa,[e[137]||(e[137]=n("span",{class:"detail-label"},"时区:",-1)),n("span",Ba,_(K.timezone),1)]),n("div",Fa,[e[138]||(e[138]=n("span",{class:"detail-label"},"语言:",-1)),n("span",Ya,_(K.language),1)]),n("div",ja,[e[139]||(e[139]=n("span",{class:"detail-label"},"用户代理:",-1)),n("span",Wa,_(K.userAgent),1)])])]),t(oe),n("div",Ja,[e[141]||(e[141]=n("h4",null,"核心功能",-1)),n("div",qa,[(y(!0),U(re,null,ge(K.features,l=>(y(),U("div",{class:"feature-item",key:l.name},[t(I,{class:ie(l.status==="active"?"feature-active":"feature-inactive")},{default:s(()=>[l.status==="active"?(y(),M(a(Le),{key:0})):(y(),M(a(_t),{key:1}))]),_:2},1032,["class"]),n("span",null,_(l.name),1)]))),128))])]),t(oe),n("div",Ka,[e[142]||(e[142]=n("h4",null,"技术栈",-1)),n("div",Ga,[(y(!0),U(re,null,ge(K.techStack,l=>(y(),M(Me,{key:l.name,class:"tech-tag"},{default:s(()=>[c(_(l.name)+" "+_(l.version),1)]),_:2},1024))),128))])]),t(oe),n("div",Xa,[e[147]||(e[147]=n("h4",null,"系统诊断",-1)),n("div",Za,[t(f,{onClick:Ls,icon:"Tools"},{default:s(()=>e[143]||(e[143]=[c("运行系统诊断",-1)])),_:1,__:[143]}),t(f,{onClick:Es,icon:"Download"},{default:s(()=>e[144]||(e[144]=[c("导出系统信息",-1)])),_:1,__:[144]}),t(f,{onClick:Ps,icon:"Delete"},{default:s(()=>e[145]||(e[145]=[c("清理系统缓存",-1)])),_:1,__:[145]}),t(f,{onClick:Ns,icon:"RefreshRight",type:"warning"},{default:s(()=>e[146]||(e[146]=[c("重启应用",-1)])),_:1,__:[146]})])]),t(oe),n("div",Qa,[e[152]||(e[152]=n("h4",null,"支持与帮助",-1)),e[153]||(e[153]=n("p",null,"如有问题或建议，请联系技术支持",-1)),n("div",el,[t(f,{type:"primary",onClick:ss,icon:"Refresh"},{default:s(()=>e[148]||(e[148]=[c("检查更新",-1)])),_:1,__:[148]}),t(f,{onClick:ns,icon:"QuestionFilled"},{default:s(()=>e[149]||(e[149]=[c("使用帮助",-1)])),_:1,__:[149]}),t(f,{onClick:os,icon:"Warning"},{default:s(()=>e[150]||(e[150]=[c("报告问题",-1)])),_:1,__:[150]}),t(f,{onClick:zs,icon:"Document"},{default:s(()=>e[151]||(e[151]=[c("许可证",-1)])),_:1,__:[151]})])])])])):z("",!0),d.value!=="about"?(y(),U("div",tl,[e[157]||(e[157]=n("div",{class:"shortcuts-hint"},[n("span",null,"快捷键：Ctrl+R 重置 | Ctrl+S 保存")],-1)),n("div",sl,[t(f,{onClick:et},{default:s(()=>e[155]||(e[155]=[c("重置当前设置",-1)])),_:1,__:[155]}),t(f,{type:"primary",onClick:tt},{default:s(()=>e[156]||(e[156]=[c("保存设置",-1)])),_:1,__:[156]})])])):z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(be,{modelValue:k.value,"onUpdate:modelValue":e[40]||(e[40]=l=>k.value=l),title:"修改密码",width:"500px","close-on-click-modal":!1},{footer:s(()=>[t(f,{onClick:e[39]||(e[39]=l=>k.value=!1)},{default:s(()=>e[158]||(e[158]=[c("取消",-1)])),_:1,__:[158]}),t(f,{type:"primary",onClick:as,loading:p.value},{default:s(()=>e[159]||(e[159]=[c(" 确认修改 ",-1)])),_:1,__:[159]},8,["loading"])]),default:s(()=>[t(he,{ref_key:"passwordFormRef",ref:N,model:D,rules:X,"label-width":"100px"},{default:s(()=>[t(T,{label:"当前密码",prop:"currentPassword"},{default:s(()=>[t(Ue,{modelValue:D.currentPassword,"onUpdate:modelValue":e[36]||(e[36]=l=>D.currentPassword=l),type:"password",placeholder:"请输入当前密码","show-password":""},null,8,["modelValue"])]),_:1}),t(T,{label:"新密码",prop:"newPassword"},{default:s(()=>[t(Ue,{modelValue:D.newPassword,"onUpdate:modelValue":e[37]||(e[37]=l=>D.newPassword=l),type:"password",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"]),n("div",nl,[n("div",ol,[n("div",{class:ie(["strength-fill",q.value]),style:Be({width:Ce.value})},null,6)]),n("span",al,_(ae.value),1)])]),_:1}),t(T,{label:"确认密码",prop:"confirmPassword"},{default:s(()=>[t(Ue,{modelValue:D.confirmPassword,"onUpdate:modelValue":e[38]||(e[38]=l=>D.confirmPassword=l),type:"password",placeholder:"请再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(be,{modelValue:V.value,"onUpdate:modelValue":e[50]||(e[50]=l=>V.value=l),title:"安全设置",width:"600px","close-on-click-modal":!1},{footer:s(()=>[t(f,{onClick:e[49]||(e[49]=l=>V.value=!1)},{default:s(()=>e[164]||(e[164]=[c("关闭",-1)])),_:1,__:[164]})]),default:s(()=>[t(he,{"label-width":"120px"},{default:s(()=>[t(T,{label:"双因素认证"},{default:s(()=>[t(ee,{modelValue:H.twoFactorAuth,"onUpdate:modelValue":e[41]||(e[41]=l=>H.twoFactorAuth=l),onChange:e[42]||(e[42]=l=>Ie("twoFactorAuth",l)),"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[160]||(e[160]=n("div",{class:"setting-hint"},"为账户添加额外的安全层",-1))]),_:1,__:[160]}),t(T,{label:"登录通知"},{default:s(()=>[t(ee,{modelValue:H.loginNotification,"onUpdate:modelValue":e[43]||(e[43]=l=>H.loginNotification=l),onChange:e[44]||(e[44]=l=>Ie("loginNotification",l)),"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[161]||(e[161]=n("div",{class:"setting-hint"},"新设备登录时发送通知",-1))]),_:1,__:[161]}),t(T,{label:"IP白名单"},{default:s(()=>[t(ee,{modelValue:H.ipWhitelist,"onUpdate:modelValue":e[45]||(e[45]=l=>H.ipWhitelist=l),onChange:e[46]||(e[46]=l=>Ie("ipWhitelist",l)),"active-text":"启用","inactive-text":"关闭"},null,8,["modelValue"]),e[162]||(e[162]=n("div",{class:"setting-hint"},"仅允许指定IP地址访问",-1))]),_:1,__:[162]}),H.ipWhitelist?(y(),M(T,{key:0,label:"会话超时"},{default:s(()=>[t(ut,{modelValue:H.sessionTimeout,"onUpdate:modelValue":e[47]||(e[47]=l=>H.sessionTimeout=l),onChange:e[48]||(e[48]=l=>Ie("sessionTimeout",l)),min:5,max:1440,step:5},null,8,["modelValue"]),e[163]||(e[163]=n("span",{style:{"margin-left":"8px"}},"分钟",-1))]),_:1,__:[163]})):z("",!0)]),_:1})]),_:1},8,["modelValue"]),t(be,{modelValue:R.value,"onUpdate:modelValue":e[52]||(e[52]=l=>R.value=l),title:"访问日志",width:"800px","close-on-click-modal":!1},{footer:s(()=>[t(f,{onClick:e[51]||(e[51]=l=>R.value=!1)},{default:s(()=>e[167]||(e[167]=[c("关闭",-1)])),_:1,__:[167]})]),default:s(()=>[n("div",ll,[n("div",il,[n("div",rl,[t(le,{title:"总访问次数",value:b.value.length},null,8,["value"]),t(le,{title:"今日访问",value:jt()},null,8,["value"]),t(le,{title:"最后访问",value:Wt(),"value-style":"font-size: 14px;"},null,8,["value"])]),n("div",ul,[t(f,{onClick:Yt,loading:A.value,size:"small"},{default:s(()=>e[165]||(e[165]=[c(" 刷新 ",-1)])),_:1,__:[165]},8,["loading"]),t(f,{type:"danger",onClick:Qe,size:"small"},{default:s(()=>e[166]||(e[166]=[c(" 清除日志 ",-1)])),_:1,__:[166]})])]),t(oe),Ht((y(),M(Ws,{data:b.value,height:"400",size:"small"},{default:s(()=>[t(ke,{prop:"timestamp",label:"访问时间",width:"180"},{default:s(({row:l})=>[c(_(Ze(l.timestamp)),1)]),_:1}),t(ke,{prop:"ip",label:"IP地址",width:"140"}),t(ke,{prop:"userAgent",label:"设备信息","min-width":"200"},{default:s(({row:l})=>[t(js,{content:l.userAgent,placement:"top"},{default:s(()=>[n("span",null,_(Jt(l.userAgent)),1)]),_:2},1032,["content"])]),_:1}),t(ke,{prop:"action",label:"操作",width:"120"},{default:s(({row:l})=>[t(Me,{type:qt(l.action),size:"small"},{default:s(()=>[c(_(l.action),1)]),_:2},1032,["type"])]),_:1}),t(ke,{prop:"status",label:"状态",width:"80"},{default:s(({row:l})=>[t(Me,{type:l.status==="success"?"success":"danger",size:"small"},{default:s(()=>[c(_(l.status==="success"?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"])),[[dt,A.value]])])]),_:1},8,["modelValue"]),t(be,{modelValue:B.value,"onUpdate:modelValue":e[55]||(e[55]=l=>B.value=l),title:"通知历史记录",width:"700px"},{footer:s(()=>[t(f,{onClick:e[54]||(e[54]=l=>B.value=!1)},{default:s(()=>e[170]||(e[170]=[c("关闭",-1)])),_:1,__:[170]}),t(f,{type:"danger",onClick:lt},{default:s(()=>e[171]||(e[171]=[c("清空历史",-1)])),_:1,__:[171]})]),default:s(()=>[n("div",dl,[n("div",fl,[t(le,{title:"总通知数",value:x.value.length},null,8,["value"]),t(le,{title:"今日通知",value:Hs()},null,8,["value"]),t(le,{title:"未读通知",value:vs()},null,8,["value"])]),t(oe),n("div",cl,[t(Se,{modelValue:O.value,"onUpdate:modelValue":e[53]||(e[53]=l=>O.value=l),placeholder:"筛选类型",size:"small",style:{width:"120px"}},{default:s(()=>[t(W,{label:"全部",value:"all"}),t(W,{label:"订单",value:"order"}),t(W,{label:"支付",value:"payment"}),t(W,{label:"安全",value:"security"}),t(W,{label:"系统",value:"system"})]),_:1},8,["modelValue"]),t(f,{onClick:ys,size:"small"},{default:s(()=>e[168]||(e[168]=[c("全部标记已读",-1)])),_:1,__:[168]})]),n("div",ml,[(y(!0),U(re,null,ge(ot.value,l=>(y(),U("div",{key:l.id,class:ie(["notification-item",{unread:!l.read}]),onClick:qs=>hs(l)},[n("div",gl,[t(I,{class:ie(Ss(l.type))},{default:s(()=>[l.type==="system"?(y(),M(a(ct),{key:0})):l.type==="order"?(y(),M(a(ln),{key:1})):l.type==="payment"?(y(),M(a(pt),{key:2})):l.type==="security"?(y(),M(a(Oe),{key:3})):(y(),M(a(gt),{key:4}))]),_:2},1032,["class"])]),n("div",_l,[n("div",Hl,_(l.title),1),n("div",vl,_(l.body),1),n("div",hl,_(ws(l.timestamp)),1)]),n("div",yl,[t(f,{onClick:rn(qs=>xs(l),["stop"]),size:"small",text:"",type:"danger"},{default:s(()=>e[169]||(e[169]=[c(" 删除 ",-1)])),_:2,__:[169]},1032,["onClick"])])],10,pl))),128))]),ot.value.length===0?(y(),U("div",xl,[t(Js,{description:"暂无通知记录"})])):z("",!0)])]),_:1},8,["modelValue"]),t(be,{modelValue:$.value,"onUpdate:modelValue":e[57]||(e[57]=l=>$.value=l),title:"系统诊断报告",width:"800px"},{footer:s(()=>[t(f,{onClick:e[56]||(e[56]=l=>$.value=!1)},{default:s(()=>e[174]||(e[174]=[c("关闭",-1)])),_:1,__:[174]}),t(f,{type:"primary",onClick:Rs},{default:s(()=>e[175]||(e[175]=[c("导出报告",-1)])),_:1,__:[175]})]),default:s(()=>[Ht((y(),U("div",wl,[j.value?(y(),U("div",Sl,[n("div",bl,[e[172]||(e[172]=n("h4",null,"诊断摘要",-1)),n("div",kl,[n("div",{class:ie(["summary-item",j.value.overall==="healthy"?"healthy":"warning"])},[n("div",Cl,[t(I,null,{default:s(()=>[j.value.overall==="healthy"?(y(),M(a(Le),{key:0})):(y(),M(a(Fe),{key:1}))]),_:1})]),n("div",Vl,[n("div",Al,_(j.value.overall==="healthy"?"系统健康":"发现问题"),1),n("div",Tl,_(j.value.summary),1)])],2)])]),t(oe),n("div",Il,[e[173]||(e[173]=n("h4",null,"详细检查结果",-1)),n("div",Dl,[(y(!0),U(re,null,ge(j.value.checks,l=>(y(),U("div",{key:l.name,class:ie(["check-item",l.status])},[n("div",Ul,[t(I,null,{default:s(()=>[l.status==="pass"?(y(),M(a(Le),{key:0})):l.status==="warning"?(y(),M(a(Fe),{key:1})):(y(),M(a(_t),{key:2}))]),_:2},1024)]),n("div",$l,[n("div",Ll,_(l.name),1),n("div",El,_(l.description),1),l.recommendation?(y(),U("div",Pl," 建议: "+_(l.recommendation),1)):z("",!0)])],2))),128))])])])):z("",!0)])),[[dt,F.value]])]),_:1},8,["modelValue"])])}}},Rl=_e(Nl,[["__scopeId","data-v-8aa263b1"]]);export{Rl as default};
